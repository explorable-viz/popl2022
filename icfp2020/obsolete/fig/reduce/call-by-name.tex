\begin{figure}[H]
\begingroup
\renewcommand*{\arraystretch}{1.2}
\begin{syntaxfig}
\mbox{Evaluation context}
&
\evalCxt{\Ev}{\sigma}
&
::=
&
\evalCxt{\hole}{\sigma}
&
\text{empty context}
\\
&&&
\evalCxt{(\exApp{\evalCxt{\Ev}{\trieFunNoRHS}}{e})}{\tau}
&
\text{function}
\\
&&&
\evalCxt{(\exApp{\exFun{\sigma}}{\;\evalCxt{\Ev}{\sigma}})}{\tau}
&
\text{argument}
\\
&&&
\evalCxt{(\exInl{\evalCxt{\Ev}{\sigma_1}})}{\trieSum{\sigma_1}{\sigma_2}}
&
\text{inject left}
\\
&&&
\evalCxt{(\exInr{\evalCxt{\Ev}{\sigma_2}})}{\trieSum{\sigma_1}{\sigma_2}}
&
\text{inject right}
\\
&&&
\evalCxt{\exPair{\evalCxt{\Ev}{\sigma}}{e}}{\trieProd{\sigma}}
&
\text{pair (first)}
\\
&&&
\evalCxt{\exPair{u}{\evalCxt{\Ev}{\lookup{\sigma}{u}}}}{\trieProd{\sigma}}
&
\text{pair (second)}
\\
&&&
\evalCxt{(\exRoll{\evalCxt{\Ev}{\sigma}})}{\trieRoll{\sigma}}
&
\text{roll}
\end{syntaxfig}
\endgroup

\noindent \shadebox{$e \reduce{\sigma} e'$}
{\small
\begin{align*}
e
&
\quad \reduce{\trieVarNoRHS{x}} \quad
\exThunkVar{x}{e}
\\
\exApp{\exFun{\sigma}}{\;v}
&
\quad \reduce{\tau} \quad
\substApp{\envFor{v}}{\lookup{\sigma}{v}}
&
(v \in \Dom{\sigma})
\end{align*}
}
\begin{smathpar}
\inferrule*
{
  e \reduce{\sigma} e'
}
{
  \plug{\evalCxt{\Ev}{\sigma'}}{e}{\sigma}
  \reduce{}
  \plug{\evalCxt{\Ev}{\sigma'}}{e'}{\sigma}
}
\end{smathpar}
\caption{Small-step call-by-name}
\label{fig:reduce:call-by-name}
\end{figure}
