\begin{figure}
\flushleft \shadebox{$\rho, \matchPlug{\xi}{\kappa}, \alpha \unlookupR{} u, \sigma$}
\begin{smathpar}
   \inferrule*[lab={\ruleName{$\unlookupR{}$-var}}]
   {
   }
   {
     \envExtend{\envEmpty}{x}{u}, \matchVar{x}{\matchHole{\kappa}}, \alpha
     \unlookupR{}
     u, \trieVar{x}{\kappa}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\unlookupR{}$-unit}}]
   {
   }
   {
     \envEmpty, \matchUnit{\matchHole{\kappa}}, \alpha
     \unlookupR{}
     \annot{\exUnit}{\alpha}, \trieUnit{\kappa}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\unlookupR{}$-inl}}]
   {
     \rho, \matchPlug{\xi}{\kappa}, \alpha \unlookupR{} u, \sigma
   }
   {
     \rho, \matchSumL{\matchPlug{\xi}{\kappa}}{\tau}, \alpha
     \unlookupR{}
     \annot{(\exInl{u})}{\alpha}, \trieSum{\sigma}{\bot_{\tau}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\unlookupR{}$-inr}}]
   {
     \rho, \matchPlug{\xi}{\kappa}, \alpha \unlookupR{} u, \tau
   }
   {
     \rho, \matchSumR{\sigma}{\matchPlug{\xi}{\kappa}}, \alpha
     \unlookupR{}
     \annot{(\exInr{u})}{\alpha}, \trieSum{\bot_{\sigma}}{\tau}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\unlookupR{}$-pair}}
   ]
   {
     \rho_2, \matchPlug{\xi'}{\kappa}, \alpha \unlookupR{} u_2, \tau
     \\
     \rho_1, \matchPlug{\xi}{\tau}, \alpha \unlookupR{} u_1, \sigma
   }
   {
     \rho_1 \concat \rho_2, \matchProd{\xi}{\matchPlug{\xi'}{\kappa}}, \alpha
     \unlookupR{}
     \annot{\exPair{u_1}{u_2}}{\alpha}, \trieProd{\sigma}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\unlookupR{}$-roll}}]
   {
     \rho, \matchPlug{\xi}{\kappa}, \alpha \unlookupR{} u, \sigma
   }
   {
     \rho, \matchRoll{\matchPlug{\xi}{\kappa}}, \alpha
     \unlookupR{}
     \annot{(\exRoll{u})}{\alpha}, \trieRoll{\sigma}
   }
\end{smathpar}
\caption{Reverse pattern-matching}
\label{fig:pattern-matching:unmatch}
\end{figure}
