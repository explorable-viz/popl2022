\begin{figure}[H]
\flushleft \shadebox{$t \darrow e$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\darrow$-nil}}
]
{
   \strut
}
{
   \sExNil \darrow \exNil
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\darrow$-cons}}
]
{
   t \darrow e
   \\
   \overrightarrow{t} \darrow e'
}
{
   \sExCons{t}{\overrightarrow{t}} \darrow \exCons{e}{e'}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\darrow$-match-as}}
]
{
   t \darrow e
   \\
   \sigma \darrow \sigma'
}
{
   \exMatch{t}{\sigma} \darrow \exLambda{\sigma'} \ e
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\darrow$-if-then-else}}
]
{
   t \darrow e
   \\
   t' \darrow e'
   \\
   t^{\twoPrime} \darrow e^{\twoPrime}
   \\
   \sigma = \elimBool{e'}{e^{\twoPrime}}
}
{
   \exIfThenElse{t}{t'}{t^{\twoPrime}}
   \darrow
   \exLambda{\sigma} \ e
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\darrow$-list-range}},
]
{
   t \darrow e
   \\
   t' \darrow e'
}
{
   \exListSeq{t}{t'} \darrow \range{e}{e'}
}
%
\and
%
\inferrule*[lab={\ruleName{$\darrow$-list-comp-true}}]
{
   t \darrow e
}
{
   \exListComp{t}{\exTrue} \darrow \exCons{e}{\exNil}
}
\and
%
\inferrule*[lab={\ruleName{$\darrow$-list-comp-qual}},
   right={$q \neq \kw{true}$}
]
{
  \exListComp{t}{q, \exTrue} \darrow e
}
{
   \exListComp{t}{q} \darrow e
}
\and
%
\inferrule*[lab={\ruleName{$\darrow$-list-comp-guard}},
   right={$t' \in Bool$} ]
{
   \exIfThenElse{t'}{\exListComp{t}{\overrightarrow{q}}}{\sExNil}
   \darrow e
}
{
   \exListComp{t}{t', \overrightarrow{q}}
   \darrow e
}
\and
%
\inferrule*[lab={\ruleName{$\darrow$-list-comp-decl}}]
{
   t' \darrow e'
   \\
   \exListComp{t}{\overrightarrow{q}} \darrow e
   \\
   \sigma = \totalise{p}{e}
}
{
   \exListComp{t}{\qualDeclaration{p}{t'}, \overrightarrow{q}}
   \darrow
   \exLambda{\sigma} \ e'
}
\and
%
\inferrule*[lab={\ruleName{$\darrow$-list-comp-gen}}]
{
   \exListComp{t}{\overrightarrow{q}} \darrow e
   \\
   \sigma = \totalise{p}{e}
   \\
   t' \darrow e'
}
{
   \exListComp{t}{\qualGenerator{p}{t'}, \overrightarrow{q}}
   \darrow
   \kw{concatMap} \ \exLambda{\sigma} \ e'
}
\end{smathpar}
\caption{Desugaring Terms}
\end{figure}

\begin{figure}[H]
\flushleft \shadebox{$\sigma \darrow \tau$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\darrow$-general-eliminator}}
]
{
   t_0 \darrow e_0
   \\
   \kappa_0 \darrow \kappa_{0}'
   \\
   ...
   \\
   t_n \darrow e_{n}
   \\
   \kappa_n \darrow \kappa_{n}'
}
{
   \{ t_0 \mapsto \kappa_0, \ .. \ , t_n \mapsto \kappa_n \} \darrow
   \{ e_0 \mapsto \kappa_{0}', \ .. \ , e_n \mapsto \kappa_{n}' \}
}
\end{smathpar}
\caption{Desugaring Eliminators}
\end{figure}
