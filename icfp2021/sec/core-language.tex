\section{Core language}

\subsection{Syntax and typing}
\input{fig/core-language/syntax-type}
\input{fig/core-language/syntax}
\input{fig/core-language/syntax-value}
\input{fig/core-language/syntax-trace}
\input{fig/core-language/typing-value}
\input{fig/core-language/typing-term}

\subsection{Evaluation}
\input{fig/core-language/match}
\input{fig/core-language/eval}

\subsection{Forward and backward slicing}
\input{fig/core-language/leq-value-elim}
\input{fig/core-language/leq-term}

\begin{definition}[Hole equivalence]
   Define $\eq$ as the intersection of $\leq$ and $\geq$.
\end{definition}

\input{fig/core-language/join-value}
\input{fig/core-language/join-elim}
\input{fig/core-language/match-fwd}
\input{fig/core-language/match-bwd}

\begin{lemma}[Determinism of pattern-matching]
   Suppose $v, \sigma \match \rho, \kappa$ and $v', \sigma' \match \rho', \kappa'$. If $v \eq v'$ and $\sigma \eq \sigma'$ then $\rho \eq \rho'$ and $\kappa \eq \kappa'$.
\end{lemma}

\begin{definition}[Forward and backward functions for pattern-matching]
   Suppose $w: v, \sigma \match \rho, \kappa$. Define $\matchFwdF{w}: \Below{(v,\sigma,\Bool)} \to \Below{(\rho,\kappa)}$ to be $\matchFwdR{w}$ domain-restricted to $\Below{(v,\sigma,\Bool)}$ and define $\matchBwdF{w}: \Below{(\rho,\kappa)} \to \Below{(v,\sigma,\Bool)}$ to be $\matchBwdR{w}$ domain-restricted to $\Below{(\rho,\kappa)}$.
\end{definition}

\begin{theorem}[Galois connection for pattern-matching]
\label{thm:core-language:match:gc}
   Suppose $w: v, \sigma \matchFwdS \rho, \kappa$.  Then $\matchFwdF{w} \adjoint \matchBwdF{w}$.
\end{theorem}

\input{fig/core-language/eval-fwd}
\input{fig/core-language/eval-bwd}
\input{fig/core-language/env-lookup}

\begin{lemma}[Determinism of evaluation]
   Suppose $\rho, e \eval v$ and $\rho', e' \eval v'$. If $\rho \eq \rho'$ and $e \eq e'$ then $v \eq v'$.
\end{lemma}

\begin{definition}[Forward and backward functions for evaluation]
   Suppose $T: \rho, e \eval v$. Define $\evalFwdF{T}: \Below{(\rho, e, \Bool)} \to \Below{v}$ to be $\evalFwdR{T}$ domain-restricted to $\Below{(\rho, e, \Bool)}$ and define $\evalBwdF{T}: \Below{v} \to \Below{(\rho, e, \Bool)}$ to be $\evalBwdR{T}$ domain-restricted to $\Below{v}$.
\end{definition}

\begin{theorem}[Galois connection for evaluation]
\label{thm:core-language:eval:gc}
   Suppose $T: \rho, e \evalFwdS v$.  Then $\evalFwdF{T} \adjoint \evalBwdF{T}$.
\end{theorem}
