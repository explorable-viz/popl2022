\begin{figure}[H]
\flushleft \shadebox{$v, T \bwdSlice \rho, e, \alpha$}
\begin{smathpar}
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-var}}
   ]
   {
      \strut
   }
   {
      v, \trVarNew{x}{\rho} \bwdSlice \envUpdate{\hole_{\Gamma}}{x}{v}, \exVar{x}, \FF
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-op}},
      right={$v \geq \phi$}
   ]
   {
      \strut
   }
   {
      v, \trOpNew{\primOp}{\Gamma}
      \bwdSlice
      \envUpdate{\hole_{\Gamma}}{\primOp}{\phi}, \exOp{\primOp}, \FF
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-nil}},
      right={$v \geq \annNil{\alpha}$}
   ]
   {
      \strut
   }
   {
      v, \sub{\trNil}{\rho} \bwdSlice \hole_{\rho}, \annNil{\alpha}, \alpha
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-int}},
      right={$v \geq \annInt{n}{\alpha}$}
   ]
   {
      \strut
   }
   {
      v, \sub{\trInt{n}}{\rho} \bwdSlice \hole_{\rho}, \annInt{n}{\alpha}, \alpha
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-cons}},
      right={$v' \geq \annCons{u}{v}{\beta}$}
   ]
   {
      u, T \bwdSlice \rho, e, \alpha
      \\
      v, U \bwdSlice \rho', e', \alpha'
   }
   {
      v', \trCons{T}{U}
      \bwdSlice
      \rho \join \rho', \annCons{e}{e'}{\beta}, \beta \join \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-matrix}},
      right={$v' \geq \annMatrix{v_{i,j}}{i}{j}{\exPair{i'}{j'}}{\beta}$}
   ]
   {
      \forall (i,j) \leq (i',j').
      v_{i,j}, U_{i,j}
      \bwdSlice
      \envExtend{\envExtend{\rho'_{i,j}}{x}{i_{\gamma_{i,j}}}}{y}{j_{\gamma'_{i,j}}}, e_{i,j}, \alpha'_{i,j}
      \\
      \annot{\exPair{\annInt{i'}{\join{\gamma}}}{\annInt{j'}{\join{\gamma'}}}}{\FF}, T \bwdSlice \rho, e', \alpha
   }
   {
      v',
      \trMatrix{U_{i,j}}{x}{y}{i}{j}{T}{i',j'}
      \bwdSlice
      \rho \join \Bigjoin{\rho'},
      \annMatrix{\Bigjoin{e}}{x}{y}{e'}{\beta},
      \beta \join \alpha \join \Bigjoin{\alpha'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-matrix-lookup}}
   ]
   {
      \annMatrix{\hole}{i}{j}{\exPair{i'}{j'}}{\FF} \reloverrideleft \{\exPair{i}{j} \mapsto v\}, T
      \bwdSlice
      \rho, e, \alpha
      \\
      \annPair{\annInt{i}{\FF}}{\annInt{j}{\FF}}{\FF}, U \bwdSlice \rho', e', \alpha'
   }
   {
       v, \trMatrixAccess{T}{i',j'}{U}{i,j}
       \bwdSlice
       \rho \join \rho', \exMatrixAccess{e}{e'}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-matrix-dims}},
      right={$v \geq \annPair{\annInt{i'}{\beta}}{\annInt{j'}{\beta'}}{\alpha}$}
   ]
   {
      \annMatrix{\hole}{i}{j}{\exPair{i'}{j'}}{\beta \join \beta'}, T \bwdSlice \rho, e, \alpha'
   }
   {
      v, \trMatrixDims{T}{i',j'}
      \bwdSlice
      \rho, \exMatrixDims{e}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-apply}},
      right={$\vdash \rho_1: \Gamma$}
   ]
   {
      v, T' \bwdSlice \envExtend{(\rho_1 \concat \rho_2)}{f}{u}, e^\twoPrime, \beta
      \\
      \rho_2, e^\twoPrime, \beta, w, \matchBwd v', \sigma'
      \\
      v', U \bwdSlice \rho', e', \alpha
      \\
      u \join \exClosureRec{\Gamma}{\rho_1}{f}{\sigma'}, T
      \bwdSlice
      \rho, e, \alpha'
   }
   {
      v, \trApp{T}{U}{\matchPlug{w}{T'}}
      \bwdSlice
      \rho \join \rho', \exApp{e}{e'}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-apply-prim}},
      right={$v \geq \annInt{n}{\beta}$}
   ]
   {
      \phi, T \bwdSlice \rho, e, \alpha
      \\
      \annInt{m}{\beta}, U \bwdSlice \rho', e', \alpha'
   }
   {
      v, \trAppPrim{T}{\phi}{U}{\exInt{m}}
      \bwdSlice
      \rho \join \rho', \exApp{e}{e'}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-binary-apply}},
      right={$v \geq \annInt{n}{\beta}$}
   ]
   {
      \annInt{n'}{\beta}, T \bwdSlice \rho, e, \alpha
      \\
      \annInt{m}{\beta}, U \bwdSlice \rho', e', \alpha'
   }
   {
      v, \trBinaryApp{T}{n'}{\primOp}{\phi}{U}{m}
      \bwdSlice
      \envUpdate{(\rho \join \rho')}{\primOp}{\phi}, \exBinaryApp{e}{\primOp}{e'}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-let}}
   ]
   {
      v, U \bwdSlice \envExtend{\rho}{x}{v'}, e, \alpha
      \\
      v', T \bwdSlice \rho', e', \alpha'
   }
   {
      v, \trLet{x}{T}{U} \bwdSlice \rho \join \rho', \exLet{x}{e'}{e}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-let-rec}}
   ]
   {
      v, T \bwdSlice \envExtend{\rho}{f}{\annot{\exClosureRec{\Gamma}{\rho'}{f}{\sigma'}}{\alpha'}}, e, \alpha
   }
   {
      v, \trLetRec{f}{\sigma}{T} \bwdSlice \rho \join \rho', \exLetRec{f}{\sigma'}{e}, \alpha \join \alpha'
   }
\end{smathpar}
\caption{Backward slicing; Boolean and pair cases omitted}
\end{figure}
