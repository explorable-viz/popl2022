\begin{figure}[H]
\flushleft \shadebox{$v, T \bwdSlice \rho, e, \alpha$}
\begin{smathpar}
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-var}}
   ]
   {
      \strut
   }
   {
      v, \sub{\trVar{x}}{\rho} \bwdSlice \envUpdate{\hole_{\rho}}{x}{v}, \annot{\exVar{x}}{\FF}, \FF
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-op}}
   ]
   {
      \strut
   }
   {
      \annot{\phi}{\alpha}, \sub{\trOp{\primOp}}{\rho}
      \bwdSlice
      \envUpdate{\hole_{\rho}}{\primOp}{\annot{\phi}{\alpha}}, \annot{\exOp{\primOp}}{\FF}, \FF
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-nil}}
   ]
   {
      \strut
   }
   {
      \annot{\exNil}{\alpha}, \sub{\trNil}{\rho} \bwdSlice \hole_{\rho}, \annot{\exNil}{\alpha}, \alpha
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-int}}
   ]
   {
      \strut
   }
   {
      \annot{\exInt{n}}{\alpha}, \sub{\trInt{n}}{\rho} \bwdSlice \hole_{\rho}, \annot{\exInt{n}}{\alpha}, \alpha
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-cons}}
   ]
   {
      u, T \bwdSlice \rho, e, \alpha'
      \\
      v, U \bwdSlice \rho', e', \alpha^\twoPrime
   }
   {
      \annot{(\exCons{u}{v})}{\alpha}, \trCons{T}{U}
      \bwdSlice
      \rho \join \rho', \annot{(\exCons{e}{e'})}{\alpha}, \alpha \join \alpha' \join \alpha^\twoPrime
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-matrix}}
   ]
   {
      \annot{\exPair{\annot{i'}{\alpha}}{\annot{j'}{\alpha}}}{\FF}, T \bwdSlice \rho, e, \beta
      \\
      \forall (i,j) \leq (i',j').
      v_{i,j}, U_{i,j}
      \bwdSlice
      \envExtend{\envExtend{\rho'_{i,j}}{x}{i_{\gamma_{i,j}}}}{y}{j_{\gamma'_{i,j}}}, e'_{i,j}, \beta'_{i,j}
   }
   {
      \annot{\exMatrix{\exPair{i'}{j'}}{i}{j}{v_{i,j}}}{\alpha},
      \trMatrix{U_{i,j}}{x}{y}{i}{j}{T}
      \bwdSlice
      \rho \join \Bigjoin{\rho'},
      \annot{\exMatrix{e}{x}{y}{{\Bigjoin{e'}}}}{\alpha \join {\Bigjoin{\gamma} \join \Bigjoin{\gamma'}}},
      \alpha \join \beta \join \Bigjoin{\beta'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-matrix-lookup}},
      right={$\val{U} = \exPair{i}{j}$}
   ]
   {
      \annot{(\val{T} \reloverrideleft \matrixLBrack\exPair{i}{j} \mapsto \annot{u}{\alpha}\matrixRBrack)}{\FF}, T
      \bwdSlice
      \rho, e, \beta
      \\
      \annot{\exPair{\annot{i}{\alpha}}{\annot{j}{\alpha}}}{\FF}, U \bwdSlice \rho', e', \beta'
   }
   {
       \annot{u}{\alpha}, \trMatrixAccess{T}{U}
       \bwdSlice
       \rho \join \rho', \annot{(\exMatrixAccess{e}{e'})}{\alpha}, \beta \join \beta'
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\bwdSlice$-matrix-dimensions}}]
   {
      \annot{\val{T}}{\alpha_1 \join \alpha_2}, T \bwdSlice \rho, e, \alpha'
   }
   {
      \annot{\exPair{\annot{i'}{\alpha_1}}{\annot{j'}{\alpha_2}}}{\alpha}, \trMatrixSize{T}
      \bwdSlice
      \rho, \annot{(\exMatrixSize{e})}{\alpha \join \alpha_1 \join \alpha_2}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-apply}}
   ]
   {
      v, T' \bwdSlice \envExtend{(\rho_1 \concat \rho)}{f}{u}, e^\twoPrime, \beta
      \\
      \rho, e, \beta, w, \matchBwd v', \sigma'
      \\
      v', U \bwdSlice \rho', e', \alpha
      \\
      u \join \exClosureRec{\rho_1}{f}{\sigma'}, T
      \bwdSlice
      \rho^\twoPrime, e, \alpha'
   }
   {
      v, \trApp{T}{U}{\matchPlug{w}{T'}}
      \bwdSlice
      \rho' \join \rho^\twoPrime, \exApp{e}{e'}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\fwdSlice$-apply-prim}}]
   {
      \val{T}, T \bwdSlice \rho, e, \alpha
      \\
      \annot{\val{U}}{\beta}, U \bwdSlice \rho', e', \alpha'
   }
   {
      \annInt{n}{\beta}, \trAppPrim{T}{U}
      \bwdSlice
      \rho \join \rho', \exApp{e}{e'}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-binary-apply}}
   ]
   {
      \annot{\val{T}}{\beta}, T \bwdSlice \rho, e, \alpha
      \\
      \annot{\val{U}}{\beta}, U \bwdSlice \rho', e', \alpha'
   }
   {
      \annInt{n}{\beta}, \trBinaryApp{T}{\primOp}{\phi}{U}
      \bwdSlice
      \envUpdate{(\rho \join \rho')}{\primOp}{\phi}, \exBinaryApp{e}{\primOp}{e'}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-let}}
   ]
   {
      v, U, \bwdSlice \envExtend{\rho}{x}{v'}, e, \alpha
      \\
      v', T \bwdSlice \rho', e', \alpha'
   }
   {
      v, \trLet{x}{T}{U} \bwdSlice \rho \join \rho', \exLet{x}{e'}{e}, \alpha \join \alpha'
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\bwdSlice$-let-rec}}
   ]
   {
      v, T, \bwdSlice \envExtend{\rho}{f}{\annot{\exClosureRec{\rho'}{f}{\sigma'}}{\alpha'}}, e, \alpha
   }
   {
      v, \trLetRec{f}{\sigma}{T} \bwdSlice \rho \join \rho', \exLetRec{f}{\sigma'}{e}, \alpha \join \alpha'
   }
\end{smathpar}
\caption{Backward slicing; Boolean and pair cases omitted}
\end{figure}
