\begin{figure}[H]
\begin{syntaxfig}
\mbox{Match}
&
w
&
::=
&
\matchVarNew{x}
&
\text{variable}
\\
&&&
\matchTrueNew \mid \matchFalseNew
&
\text{Boolean}
\\
&&&
\matchPair{w}{w'}
&
\text{pair}
\\
&&&
\matchNilNew
&
\text{nil}
\\
&&&
\matchConsNew{w}{w'}
&
\text{cons}
\\[2mm]
\mbox{Trace}
&
T, U
&
::=
&
\trVar{x}
&
\text{variable}
\\
&&&
\trInt{n}
&
\text{integer}
\\
&&&
\trPair{T}{U}
&
\text{pair}
\\
&&&
\trNil
&
\text{nil}
\\
&&&
\trCons{T}{U}
&
\text{cons}
\\
&&&
\trMatrix{T_{i,j}}{x}{y}{i}{j}{U}{i',j'}
&
\text{matrix}
\\
&&&
\trMatrixAccess{T}{i',j'}{U}{i,j}
&
\text{matrix lookup}
\\
&&&
\trMatrixDims{T}{i,j}
&
\text{matrix dimensions}
\\
&&&
\trApp{T}{U}{\matchPlug{w}{T'}}
&
\text{apply}
\\
&&&
\trAppPrim{T}{\phi}{U}{\exInt{n}}
&
\text{apply primitive}
\\
&&&
\trBinaryApp{T}{n}{\primOp}{\phi}{U}{m}
&
\text{binary application}
\\
&&&
\trLet{x}{T}{U}
&
\text{let}
\\
&&&
\trLetRec{f}{\sigma}{T}
&
\text{recursive function}
\end{syntaxfig}
\caption{Matches and traces}
\end{figure}
