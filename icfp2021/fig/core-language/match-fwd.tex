\begin{figure}[H]
\flushleft \shadebox{$v, w, \sigma \matchFwd \rho, \kappa, \alpha$}
\begin{smathpar}
   \inferrule*[lab={\ruleName{$\matchFwd$-$\hole$}}]
   {
      \asVal{w}, w, \sigma
      \matchFwd
      \rho, \kappa, \alpha
   }
   {
      \hole, w, \sigma
      \matchFwd
      \rho, \kappa, \alpha
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-var}}]
   {
      \strut
   }
   {
      v, \matchVarNew{x}, \elimVar{x}{\kappa}
      \matchFwd
      \envExtend{\envEmpty}{x}{v}, \kappa, \TT
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-var-$\hole$}}]
   {
      \strut
   }
   {
      v, \matchVarNew{x}, \hole
      \matchFwd
      \envExtend{\envEmpty}{x}{v}, \hole, \TT
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-true}}]
   {
      \strut
   }
   {
      \annTrue{\alpha}, \matchTrueNew, \elimBool{\kappa}{\kappa'}
      \matchFwd
      \envEmpty, \kappa, \alpha
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-true-$\hole$}}]
   {
      \strut
   }
   {
      \annTrue{\alpha}, \matchTrueNew, \hole
      \matchFwd
      \envEmpty, \hole, \alpha
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-false}}]
   {
      \strut
   }
   {
      \annFalse{\alpha}, \matchFalseNew, \elimBool{\kappa}{\kappa'}
      \matchFwd
      \envEmpty, \kappa', \alpha
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-false-$\hole$}}]
   {
      \strut
   }
   {
      \annFalse{\alpha}, \matchFalseNew, \hole
      \matchFwd
      \envEmpty, \hole, \alpha
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-pair}}]
   {
      v, w, \sigma \matchFwd \rho_1, \tau, \beta
      \\
      v', w', \tau \matchFwd \rho_2, \kappa, \beta'
   }
   {
      \annPair{v}{v'}{\alpha}, \matchPair{w}{w'}, \elimProd{\sigma}
      \matchFwd
      \rho_1 \concat \rho_2, \kappa, \alpha \meet \beta \meet \beta'
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-pair-$\hole$}}]
   {
      v, w, \hole \matchFwd \rho_1, \hole, \beta
      \\
      v', w', \hole \matchFwd \rho_2, \hole, \beta'
   }
   {
      \annPair{v}{v'}{\alpha}, \matchPair{w}{w'}, \hole
      \matchFwd
      \rho_1 \concat \rho_2, \hole, \alpha \meet \beta \meet \beta'
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-nil}}]
   {
      \strut
   }
   {
      \annNil{\alpha}, \matchNilNew, \elimList{\branchNil{\kappa}}{\branchCons{\sigma}}
      \matchFwd
      \envEmpty, \kappa, \alpha
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-nil-$\hole$}}]
   {
      \strut
   }
   {
      \annNil{\alpha}, \matchNilNew, \hole
      \matchFwd
      \envEmpty, \hole, \alpha
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-cons}}]
   {
      v, w, \sigma \matchFwd \rho_1, \tau, \beta
      \\
      v', w', \tau \matchFwd \rho_2, \kappa, \beta'
   }
   {
      \annCons{v}{v'}{\alpha}, \matchConsNew{w}{w'}, \elimList{\branchNil{\kappa}}{\branchCons{\sigma}}
      \matchFwd
      \rho_1 \concat \rho_2, \kappa, \alpha \meet \beta \meet \beta'
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\matchFwd$-cons-$\hole$}}]
   {
      v, w, \hole \matchFwd \rho_1, \hole, \beta
      \\
      v', w', \hole \matchFwd \rho_2, \hole, \beta'
   }
   {
      \annCons{v}{v'}{\alpha}, \matchConsNew{w}{w'}, \hole
      \matchFwd
      \rho_1 \concat \rho_2, \hole, \alpha \meet \beta \meet \beta'
   }
\end{smathpar}
\vspace{5pt}
\flushleft \shadebox{$\asVal{w} = v$}
\begin{salign}
   \asVal{\matchVarNew{x}} &= \hole
   \\
   \asVal{\matchFalseNew} &= \annFalse{\FF}
   \\
   \asVal{\matchTrueNew} &= \annTrue{\FF}
   \\
   \asVal{\matchPair{w}{w'}} &= \annPair{\asVal{w}}{\asVal{w'}}{\FF}
   \\
   \asVal{\matchNilNew} &= \annNil{\FF}
   \\
   \asVal{\matchConsNew{w}{w'}} &= \annCons{\asVal{w}}{\asVal{w'}}{\FF}
\end{salign}
\caption{Pattern-matching: forward slicing}
\end{figure}
