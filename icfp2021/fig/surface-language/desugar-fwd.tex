\begin{figure}[H]
\flushleft \shadebox{$s \dfwdarrow e$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-non-empty-list}}
]
{
   s \dfwdarrow e
   \\
   l \dfwdarrow e'
}
{
   \annot{\sExList{s}{l}}{\alpha} \dfwdarrow \annot{\exCons{e}{e'}}{\alpha}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-if-then-else}}
]
{
   s \dfwdarrow e
   \\
   s' \dfwdarrow e'
   \\
   s^{\twoPrime} \dfwdarrow e^{\twoPrime}
   \\
   \sigma = \elimBool{e'}{e^{\twoPrime}}
}
{
   \annot{\exIfThenElse{s}{s'}{s^{\twoPrime}}}{\alpha}
   \dfwdarrow
   \annot{\exLambda{\sigma \ e}}{\alpha}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-list-range}},
]
{
   s \dfwdarrow e
   \\
   s' \dfwdarrow e'
}
{
   \annot{\exListSeq{s}{s'}}{\alpha} \dfwdarrow \annot{\range{e}{e'}}{\alpha}
}
%
\and
%
\inferrule*[lab={\ruleName{$\dfwdarrow$-list-comp-done}}]
{
   s \dfwdarrow e
}
{
   \annot{\exListComp{s}{\exTrue}}{\alpha} \dfwdarrow \annot{\exCons{e}{\exNil}}{\alpha}
}
\and
%
\inferrule*[lab={\ruleName{$\dfwdarrow$-list-comp-qual}},
   right={$q \neq \kw{true}$}
]
{
  \exListComp{s}{q, \exTrue} \dfwdarrow e
}
{
  \annot{\exListComp{s}{q}}{\alpha} \dfwdarrow \annot{e}{\alpha}
}
\and
%
\inferrule*[lab={\ruleName{$\dfwdarrow$-list-comp-guard}}]
{
   \exIfThenElse{s'}{\exListComp{s}{\vec{q}}}{\exNil}
   \dfwdarrow e
}
{
   \annot{\exListComp{s}{s', \vec{q}}}{\alpha}
   \dfwdarrow \annot{e}{\alpha}
}
\and
%
\inferrule*[lab={\ruleName{$\dfwdarrow$-list-comp-decl}}]
{
   s' \dfwdarrow e'
   \\
   \exListComp{s}{\vec{q}} \dfwdarrow e
   \\
   \sigma = \totalise{p}{e}
}
{
   \annot{\exListComp{s}{\qualDeclaration{p}{s'}, \vec{q}}}{\alpha}
   \dfwdarrow
   \annot{\exLambda{\sigma} \ e'}{\alpha}
}
\and
%
\inferrule*[lab={\ruleName{$\dfwdarrow$-list-comp-gen}}]
{
   \exListComp{s}{\vec{q}} \dfwdarrow e
   \\
   \sigma = \totalise{p}{e}
   \\
   s' \dfwdarrow e'
}
{
   \annot{\exListComp{s}{\qualGenerator{p}{s'}, \vec{q}}}{\alpha}
   \dfwdarrow
   \annot{\kw{concatMap} \ \exLambda{\sigma} \ e'}{\alpha}
}
\end{smathpar}
\caption{Desugaring -- forward slicing (additional forms only)}
\end{figure}

\begin{figure}[H]
\flushleft \shadebox{$l \dfwdarrow e$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-end}}
]
{
   \strut
}
{
   \sExNil \dfwdarrow \exNil
}
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-cons}}
]
{
   s \dfwdarrow e
   \\
   l \dfwdarrow e'
}
{
   \sExCons{s}{l} \dfwdarrow \exCons{e}{e'}
}
\end{smathpar}
\caption{Desugaring list rest - forward slicing}
\end{figure}
