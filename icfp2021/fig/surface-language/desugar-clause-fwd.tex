
\begin{figure}[H]
\flushleft\shadebox{$\vec{p}, e \dfwdarrow \sigma$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-pattern-seq}}
]
{
   \vec{p}, e \dfwdarrow \sigma
   \\
   p, \exLambda{\sigma} \dfwdarrow \sigma'
}
{
   p \cdot \vec{p}, e
   \dfwdarrow
   \sigma'
}
\end{smathpar}

\flushleft\shadebox{$p, \kappa \dfwdarrow \sigma$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-var}}
]
{
   \strut
}
{
   x, \kappa
   \dfwdarrow
   \elimVar{x}{\kappa}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-nil}}
]
{
   \strut
}
{
   \pattNil, \kappa
   \dfwdarrow
   \branchNil{\kappa}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-cons}}
]
{
   p', \kappa \dfwdarrow \sigma
   \\
   p, \sigma \dfwdarrow \sigma'
}
{
   \pattCons{p}{p'}, \kappa
   \dfwdarrow
   \branchCons{\sigma'}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-non-empty-list}}
]
{
   o, \kappa \dfwdarrow \sigma
   \\
   p, \sigma \dfwdarrow \sigma'
}
{
   (\pattList{p}{o}), \kappa
   \dfwdarrow
   \branchCons{\sigma'}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-pair}}
]
{
   p', \kappa \dfwdarrow \sigma
   \\
   p, \sigma \dfwdarrow \sigma'
}
{
   \pattPair{p}{p'}, \kappa
   \dfwdarrow
   \elimProd{\sigma'}
}
\end{smathpar}

\flushleft\shadebox{$o, \kappa \dfwdarrow \sigma$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-list-end}}
]
{
   \strut
}
{
   \pattListEnd, \kappa
   \dfwdarrow
   \branchNil{\kappa}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-list-rest}}
]
{
   o, \kappa \dfwdarrow \sigma
   \\
   p, \sigma \dfwdarrow \sigma'
}
{
   (\pattListNext{p}{o}), \kappa
   \dfwdarrow
   \branchCons{\sigma'}
}
\end{smathpar}

\flushleft\shadebox{$\vec{c} \dfwdarrow \sigma$ }
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-clause}}
]
{
   s \dfwdarrow e
   \\
   \vec{p}, e \dfwdarrow \sigma
}
{
   \clause{p}{s}
   \dfwdarrow
   \sigma
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\dfwdarrow$-clause-seq}}
]
{
   c \dfwdarrow \sigma
   \\
   \vec{c} \dfwdarrow \sigma'
   \\
   \tau = \sigma \join \sigma'
}
{
   c \cdot \vec{c}
   \dfwdarrow
   \tau
}
\end{smathpar}
\caption{Desugaring clauses and patterns -- forward slicing}
\end{figure}
