\begin{figure}
\flushleft\shadebox{totalise p $\kappa = \sigma$ }
\begin{salign}
   \totalise{x}{\kappa} &= \{ x \mapsto \kappa \}
   \\
   \totalise{\pattTrue}{\kappa} &= \{\exTrue \mapsto \kappa, \exFalse \mapsto \exNil\}
   \\
   \totalise{\pattFalse}{\kappa} &= \{\exTrue \mapsto \exNil, \exFalse \mapsto \kappa\}
   \\
   \totalise{\pattPair{p_1}{p_2}}{\kappa} &= \langle \totalise{p_1}{\totalise{p_2}{\kappa}} \rangle
   \\
   \totalise{\pattNil}{\kappa} &= \{\exNil \mapsto \kappa, (\symCons) \ \{x \mapsto xs \mapsto \kw{[]}\}\}
   \\
   \totalise{\pattCons{p}{p'}}{\kappa} &= \{\exNil \mapsto \exNil, (\symCons) \ \totalise{p}{\totalise{p'}{\kappa}} \}
   \\
   \totalise{\pattList{p}{o}}{\kappa} &= \{\exNil \mapsto \exNil, (\symCons) \ \totalise{p}{\totaliseRest{o}{\kappa}} \}
   \\
\end{salign}

\flushleft\shadebox{totaliseRest o $\kappa = \sigma$ }
\begin{salign}
   \totaliseRest{\pattSNil}{\kappa} &= \{\exNil \mapsto \kappa, (\symCons) \ \{x \mapsto xs \mapsto \kw{[]}\} \}
   \\
   \totaliseRest{\pattSCons{p}{o}}{\kappa} &= \{\exNil \mapsto \exNil, (\symCons) \ \totalise{p}{\totaliseRest{o}{\kappa}} \}
\end{salign}
\caption{Construct total eliminator (from branch)}
\end{figure}

