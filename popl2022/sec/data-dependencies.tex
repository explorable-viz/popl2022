\section{A bidirectional dynamic dependency analysis}
\label{sec:data-dependencies}

We now extend the core language described in \secref{core-language} with a bidirectional mechanism for tracking data dependencies. First we establish a way of selecting (parts of) values (\secref{data-dependencies:lattices-of-selections}). (Consider the \kw{data} field of the bar chart computed in \figref{introduction:data-linking}, which contains a list of records; the record corresponding to China is $\exRec{\bind{\kw{x}}{\kw{"China"}} \concat \bind{\kw{y}}{\kw{295.3}}}$. In the example, we selected the value of the field $\kw{y}$ in order to see the corresponding selection on the input.) Then we define a forward analysis function $\evalFwdF{T}$ (\secref{data-dependencies:analyses:fwd}) which specifies how a selection on a program and its environment (collectively: an \emph{input selection}) becomes a selection on its output; selections represent \emph{availability}, with the input selection at each step giving rise to an output selection indicating the data available to the downstream computation. In the other direction direction, we define a backward dependency function $\evalBwdF{T}$ (\secref{data-dependencies:analyses:bwd}) specifying how selection on the output are mapped back to inputs; then selections represent demands, with the output selection at each step giving rise to an input selection identifying the data needed from the upstream computation.

\input{sec/data-dependencies/selections}
\input{sec/data-dependencies/analyses}
