\begin{figure}[H]
\small
$\begin{array}{lll|llll}
\arrayrulecolor{lightgray}
&&&\textit{where}
\\
\rowcolor{verylightgray}
\totaliseGC{\vec{\pi}} &::& \Below{(\kappa',\TT)} \to \Below{\kappa}
&\explVal{\vec{\pi}}{\kappa \totalisefwdarrow \kappa'}
&&
\\
% expr
\totaliseFwdF{\seqEmpty}(e,\alpha) &=& e
\\
% var
\totaliseFwdF{\pattVar{x} \concat \vec{\pi}}(\elimVar{x}{\kappa},\alpha)
&=&
\elimVar{x}{\kappa'}
&
\totaliseFwdF{\vec{\pi}}(\kappa,\alpha) &=& \kappa'
\\
% true
\totaliseFwdF{\pattTrue \concat \vec{\pi}}(\elimBoolTrue{\kappa},\alpha)
&=&
\elimBool{\kappa'}{\annot{\exNil}{\alpha}}
&
\totaliseFwdF{\vec{\pi}}(\kappa,\alpha) &=& \kappa'
\\
% false
\totaliseFwdF{\pattFalse \concat \vec{\pi}}(\elimBoolFalse{\kappa},\alpha)
&=&
\elimBool{\annot{\exNil}{\alpha}}{\kappa'}
&
\totaliseFwdF{\vec{\pi}}(\kappa,\alpha) &=& \kappa'
\\
% prod
\totaliseFwdF{\pattPair{p}{p'} \concat \vec{\pi}}(\elimProd{\sigma},\alpha)
&=&
\elimProd{\sigma'}
&
\totaliseFwdF{p \concat p' \concat \vec{\pi}}{(\sigma,\alpha)} &=& \sigma'
\\
% nil
\totaliseFwdF{\pattNil \concat \vec{\pi}}(\elimNil{\kappa},\alpha)
&=&
\elimList{\kappa'}{\elimVar{x}{\elimVar{y}{\annot{\exNil}{\alpha}}}}
&
\totaliseFwdF{\vec{\pi}}{(\kappa,\alpha)} &=& \kappa'
\\
% cons
\totaliseFwdF{\pattCons{p}{p'} \concat \vec{\pi}}(\elimCons{\sigma},\alpha)
&=&
\elimList{\annot{\exNil}{\alpha}}{\tau}
&
\totaliseFwdF{p \concat p' \concat \vec{\pi}}{(\sigma,\alpha)} &=& \sigma'
%\end{array}$ \\
%\vspace{3mm}
%
%\small
%$\begin{array}{lll|llll}
%&&&
%\textit{where}
\\[3mm]
% hole
\totaliseBwdF{\vec{\pi}}(\hole)
&=&
\totaliseBwdF{\vec{\pi}}(\kappa)
&
\hole \neq \kappa &\eq& \hole
\\
% empty
\totaliseBwdF{\seqEmpty}(\kappa)
&=&
(\kappa,\FF)
\\
% var
\totaliseBwdF{\pattVar{x} \concat \vec{\pi}}(\elimVar{x}{\kappa})
&=&
(\elimVar{x}{\kappa'},\alpha)
&
\totaliseBwdF{\vec{\pi}}(\kappa)
&=&
(\kappa',\alpha)
\\
% true
\totaliseBwdF{\pattTrue \concat \vec{\pi}}(\elimBool{\kappa_1}{\annot{\exNil}{\alpha}})
&=&
(\elimBoolTrue{\kappa_1'}, \alpha \join \beta)
&
\totaliseBwdF{\vec{\pi}}(\kappa_1)
&=&
(\kappa_1',\beta)
\\
% false
\totaliseBwdF{\pattFalse \concat \vec{\pi}}(\elimBool{\annot{\exNil}{\alpha}}{\kappa_2})
&=&
(\elimBoolFalse{\kappa_2'}, \alpha \join \beta)
&
\totaliseBwdF{\vec{\pi}}(\kappa_2)
&=&
(\kappa_2',\beta)
\\
% prod
\totaliseBwdF{\pattPair{p}{p'} \concat \vec{\pi}}(\elimProd{\sigma'})
&=&
(\elimProd{\tau},\beta)
&
\totaliseBwdF{p \concat p' \concat \vec{\pi}}(\sigma')
&=&
(\tau,\beta)
\\
% nil
\totaliseBwdF{\pattNil \concat \vec{\pi}}(\elimList{\kappa}{\elimVar{x}{\elimVar{y}{\annot{\exNil}{\alpha}}}})
&=&
(\elimNil{\kappa'},\alpha \join \beta)
&
\totaliseBwdF{\vec{\pi}}(\kappa)
&=&
(\kappa',\beta)
\\
% cons
\totaliseBwdF{(\pattCons{p}{p'}) \concat \vec{\pi}}(\elimList{\annot{\exNil}{\alpha}}{\sigma'})
&=&
(\elimCons{\tau},\alpha \join \beta)
&
\totaliseBwdF{p \concat p' \concat \vec{\pi}}(\sigma')
&=&
(\tau,\beta)
\\
% non-empty-list
\totaliseBwdF{(\pattList{p}{o}) \concat \vec{\pi}}(\elimList{\annot{\exNil}{\alpha}}{\sigma'})
&=&
(\elimCons{\tau},\alpha \join \beta)
&
\totaliseBwdF{p \concat o \concat \vec{\pi}}(\sigma')
&=&
(\tau,\beta)
\\
% list-rest-end
\totaliseBwdF{(\pattListEnd \concat \vec{\pi}}
             (\elimList{\kappa}{\elimVar{x}{\elimVar{y}{\annot{\exNil}{\alpha}}}})
&=&
(\elimNil{\kappa'},\alpha \join \beta)
&
\totaliseBwdF{\vec{\pi}}(\kappa)
&=&
(\kappa',\beta)
\\
% list-rest-end
\totaliseBwdF{(\pattListNext{p}{o}) \concat \vec{\pi}}
             (\elimList{\annot{\exNil}{\alpha}}{\sigma'})
&=&
(\elimCons{\tau},\alpha \join \beta)
&
\totaliseBwdF{p \concat o \concat \vec{\pi}}(\sigma')
&=&
(\tau,\beta)
\end{array}$
\caption{Totalise --- forward and backward slicing}
\end{figure}
