\begin{figure}[H]
\flushleft\shadebox{$\sigma \clauseBwdR{\vec{p}} \kappa$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-eq}}
]
{
   \sigma \mathrel{\eq\clauseBwdR{\vec{p}}} \kappa
}
{
   \sigma \clauseBwdR{\vec{p}} \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-var}}
]
{
   \strut
}
{
   \elimVar{x}{\kappa}
   \clauseBwdR{\pattVar{x}}
   \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-true}}
]
{
   \strut
}
{
   \elimBoolTrue{\kappa}
   \clauseBwdR{\pattTrue}
   \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-false}}
]
{
   \strut
}
{
   \elimBoolFalse{\kappa}
   \clauseBwdR{\pattFalse}
   \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-nil}}
]
{
   \strut
}
{
   \elimNil{\kappa}
   \clauseBwdR{\pattNil}
   \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-cons}}
]
{
   \sigma \clauseBwdR{p} \tau
   \\
   \tau \clauseBwdR{p'} \kappa
}
{
   \elimCons{\sigma}
   \clauseBwdR{\pattCons{p}{p'}}
   \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-non-empty-list}}
]
{
   \sigma \clauseBwdR{p} \tau
   \\
   \tau \clauseBwdR{o} \kappa
}
{
   \elimCons{\sigma}
   \clauseBwdR{\pattList{p}{o}}
   \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-pair}}
]
{
   \sigma \clauseBwdR{p} \tau
   \\
   \tau \clauseBwdR{p'} \kappa
}
{
   \elimProd{\sigma}
   \clauseBwdR{\pattPair{p}{p'}}
   \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-seq}},
   right={$\length{\vec{p}} \numgt 0$}
]
{
   \sigma \clauseBwdR{p}\eq \exLambda{\sigma'}
   \\
   \sigma' \clauseBwdR{\vec{p}} e
}
{
   \sigma
   \clauseBwdR{p \concat \vec{p}}
   e
}
\end{smathpar}

\vspace{5pt}
\flushleft\shadebox{$\sigma \clauseBwdR{o} \kappa$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-list-rest-eq}}
]
{
   \sigma \mathrel{\eq\clauseBwdR{o}} \kappa
}
{
   \sigma \clauseBwdR{o} \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-list-rest-end}}
]
{
   \strut
}
{
   \elimNil{\kappa}
   \clauseBwdR{\pattListEnd}
   \kappa
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clauseBwdS$-list-rest-cons}}
]
{
   \sigma \clauseBwdR{p} \tau
   \\
   \tau \clauseBwdR{o} \kappa
}
{
   \elimCons{\sigma}
   \clauseBwdR{(\pattListNext{p}{o})}
   \kappa
}
\end{smathpar}

\vspace{5pt}
\flushleft\shadebox{$\sigma \clausesBwdR{\vec{c}} \vec{c}'$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\clausesBwdS$-clause}}
]
{
   \sigma \clauseBwdR{\vec{p}} e
   \\
   e \desugarBwdR{s} s'
}
{
   \sigma
   \clausesBwdR{\clause{p}{s}}
   \clause{p}{s'}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\clausesBwdS$-clause-seq}},
   right={$\length{\vec{c}} \numgt 0$}
]
{
   \sigma \clausesBwdR{c} c'
   \\
   \sigma \clausesBwdR{\vec{c}} \vec{c}'
}
{
   \sigma
   \clauseBwdR{c \concat \vec{c}}
   c' \concat \vec{c}'
}
\end{smathpar}
\caption{Desugaring clauses -- backward slicing}
\end{figure}
