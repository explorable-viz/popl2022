\begin{figure}[H]
\flushleft \shadebox{$\totaliseFwd{\kappa}{\alpha}{\vec{\pi}}{\kappa'}$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-expr}}
]
{
   \strut
}
{
   \totaliseFwd{e}{\alpha}{\seqEmpty}{e}
}
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-var}}
]
{
   \totaliseFwd{\kappa}{\alpha}{\vec{\pi}}{\kappa'}
}
{
   \totaliseFwd{\elimVar{x}{\kappa}}
               {\alpha}
               {\pattVar{x} \concat \vec{\pi}}
               {\elimVar{x}{\kappa'}}
}
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-true}}
]
{
   \totaliseFwd{\kappa}{\alpha}{\vec{\pi}}{\kappa'}
}
{
   \totaliseFwd{\elimTrue{\kappa}}
               {\alpha}
               {\pattTrue \concat \vec{\pi}}
               {\elimBool{\kappa'}{\annNil{\alpha}}}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-false}}
]
{
   \totaliseFwd{\kappa}{\alpha}{\vec{\pi}}{\kappa'}
}
{
   \totaliseFwd{\elimFalse{\kappa}}
               {\alpha}
               {\pattFalse \concat \vec{\pi}}
               {\elimBool{\annNil{\alpha}}{\kappa'}}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-prod}}
]
{
   \totaliseFwd{\sigma}{\alpha}{p \concat p' \concat \vec{\pi}}{\sigma'}
}
{
   \totaliseFwd{\elimProd{\sigma}}
               {\alpha}
               {\pattPair{p}{p'} \concat \vec{\pi}}
               {\elimProd{\sigma'}}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-record-empty}}
]
{
   \totaliseFwd{\kappa}{\alpha}{\vec{\pi}}{\kappa'}
}
{
   \totaliseFwd{\elimRec{\seqEmpty}{\kappa}}
               {\alpha}
               {\pattRec{\seqEmpty} \concat \vec{\pi}}
               {\elimRec{\seqEmpty}{\kappa'}}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-record}}
]
{
   \totaliseFwd{\sigma}{\alpha}{\seqRange{p_1}{p_j} \concat \vec{\pi}}{\sigma'}
}
{
   \totaliseFwd{\elimRec{(\vec{x} \concat y)}{\sigma}}
               {\alpha}
               {\pattRec{(\vec{\bind{x}{p}} \concat \bind{y}{p'})} \concat \vec{\pi}}
               {\elimRec{(\fieldFst \concat \fieldSnd)}{\sigma'}}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-pair}}
]
{
   \totaliseFwd{\sigma}{\alpha}{p \concat p' \concat \vec{\pi}}{\sigma'}
}
{
   \totaliseFwd{\elimRec{(\fieldFst \concat \fieldSnd)}{\sigma}}
               {\alpha}
               {\pattPair{p}{p'} \concat \vec{\pi}}
               {\elimRec{(\fieldFst \concat \fieldSnd)}{\sigma'}}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-nil}}
]
{
   \totaliseFwd{\kappa}{\alpha}{\vec{\pi}}{\kappa'}
}
{
   \totaliseFwd{\elimNil{\kappa}}
               {\alpha}
               {\pattNil \concat \vec{\pi}}
               {\elimList{\kappa'}{\elimVar{x}{\elimVar{y}{\annNil{\alpha}}}}}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-cons}}
]
{
   \totaliseFwd{\sigma}{\alpha}{p \concat p' \concat \vec{\pi}}{\sigma'}
}
{
   \totaliseFwd{\elimCons{\sigma}}
               {\alpha}
               {(\pattCons{p}{p'}) \concat \vec{\pi}}
               {\elimList{\annNil{\alpha}}{\sigma'}}
}
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-non-empty-list}}
]
{
   \totaliseFwd{\sigma}{\alpha}{p \concat o \concat \vec{\pi}}{\sigma'}
}
{
   \totaliseFwd{\elimCons{\sigma}}
               {\alpha}
               {(\pattList{p}{o}) \concat \vec{\pi}}
               {\elimList{\annNil{\alpha}}{\sigma'}}
}
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-list-rest-end}}
]
{
   \totaliseFwd{\kappa}{\alpha}{\vec{\pi}}{\kappa'}
}
{
   \totaliseFwd{\elimNil{\kappa}}
               {\alpha}
               {\pattListEnd \concat \vec{\pi}}
               {\elimList{\kappa'}{\elimVar{x}{\elimVar{y}{\annot{\exNil}{\alpha}}}}}
}
\and
%
\inferrule*[
   lab={\ruleName{$\totaliseFwdS$-elim-list-rest-cons}}
]
{
   \totaliseFwd{\sigma}{\alpha}{p \concat o \concat \vec{\pi}}{\sigma'}
}
{
   \totaliseFwd{\elimCons{\sigma}}
               {\alpha}
               {(\pattListNext{p}{o}) \concat \vec{\pi}}
               {\elimList{\annNil{\alpha}}{\sigma'}}
}
\end{smathpar}
\caption{Totalise -- forward slicing}
\end{figure}
