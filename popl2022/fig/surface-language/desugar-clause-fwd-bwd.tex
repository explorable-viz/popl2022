\begin{figure}[H]
\small
$\begin{array}{lll|llll}
\arrayrulecolor{lightgray}
\rowcolor{verylightgray}
\singletonElimGC{\vec{p}}: \Below{\kappa} \to \Below{\sigma}
\textit{ where }\vec{p}, \kappa \singletonElimFwd \sigma
&&&\textit{where}&&
\\
% hole
\singletonElimBwdF{\vec{p}}(\hole)
&=&
\singletonElimBwdF{\vec{p}}(\sigma)
&
\hole \neq \sigma &\eq& \hole
\\
% var
\singletonElimBwdF{\pattVar{x}}(\elimVar{x}{\kappa})
&=&
\kappa
\\
% nil
\singletonElimBwdF{\pattNil}(\elimList{\kappa}{\sigma})
&=&
\kappa
\\
% cons
\singletonElimBwdF{\pattCons{p}{p'}}(\elimList{\kappa}{\sigma'})
&=&
\singletonElimBwdF{p'}(\singletonElimBwdF{p}(\sigma'))
\\
% non-empty-list
\singletonElimBwdF{\pattList{p}{o}}(\elimList{\kappa}{\sigma'})
&=&
\singletonElimBwdF{o}(\singletonElimBwdF{p}(\sigma'))
\\
% pair
\singletonElimBwdF{\pattPair{p}{p'}}(\elimProd{\sigma})
&=&
\singletonElimBwdF{p'}(\singletonElimBwdF{p}(\sigma))
\\
% seq
\singletonElimBwdF{p \concat \vec{p}}(\sigma)
&=&
\singletonElimBwdF{\vec{p}}(\sigma')
&
\length{\vec{p}} \numgt 0
\\
&&&
\singletonElimBwdF{p}(\sigma) &\eq& \exLambda{\sigma'}
\\
\rowcolor{verylightgray}
\singletonElimGC{o}: \Below{\kappa} \to \Below{\sigma}
\textit{ where }o, \kappa \singletonElimFwd \sigma
&&&&&
\\
% list-rest-end
\singletonElimFwdF{\pattListEnd}(\kappa)
&=&
\elimNil{\kappa}
\\
% list-rest-cons
\singletonElimFwdF{(\pattListNext{p}{o})}(\kappa)
&=&
\elimCons{\singletonElimFwdF{p}(\singletonElimFwdF{o}(\kappa))}
\\[3mm]
% hole
\singletonElimBwdF{o}(\hole)
&=&
\singletonElimBwdF{o}(\sigma)
&
\hole \neq \sigma &\eq& \hole
\\
% list-rest-end
\singletonElimBwdF{\pattListEnd}(\elimList{\kappa}{\sigma})
&=&
\kappa
\\
% list-rest-cons
\singletonElimBwdF{(\pattListNext{p}{o})}(\elimList{\kappa}{\sigma'})
&=&
\singletonElimBwdF{o}(\singletonElimBwdF{p}(\sigma'))
\end{array}$ \\

\vspace{5pt}
\flushleft\shadebox{$\sigma \desugarClauseBwd{\vec{c}} \vec{c}'$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\desugarClauseBwd{}$-clause}}
]
{
   \sigma \singletonElimBwd{\vec{p}} e
   \\
   e \desugarBwd{s} s'
}
{
   \sigma
   \desugarClauseBwd{\clause{p}{s}}
   \clause{p}{s'}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\desugarClauseBwd{}$-clause-seq}}
]
{
   \sigma \desugarClauseBwd{c} c'
   \\
   \sigma \desugarClauseBwd{\vec{c}} \vec{c}'
}
{
   \sigma
   \desugarClauseBwd{c \concat \vec{c}}
   c' \concat \vec{c}'
}
\end{smathpar}
\caption{Desugaring clauses and patterns -- forward and backward slicing}
\end{figure}
