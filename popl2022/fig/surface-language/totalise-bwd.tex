\begin{figure}[H]
\flushleft \shadebox{$\totaliseBwdF{\vec{\pi}}: \Below{\kappa} \to \Below{\kappa',\TT}$}
where $\kappa \totalisefwdarrow \kappa'$ \\

\small
$\begin{array}{lllllll}
&&&
\textit{where}
\\
% hole
\totaliseBwdF{\vec{\pi}}(\hole)
&=&
\totaliseBwdF{\vec{\pi}}(\kappa)
&
\hole \neq \kappa &\eq& \hole
\\
% empty
\totaliseBwdF{\seqEmpty}(\kappa)
&=&
(\kappa,\FF)
\\
% var
\totaliseBwdF{\pattVar{x} \concat \vec{\pi}}(\elimVar{x}{\kappa})
&=&
(\elimVar{x}{\kappa'},\alpha)
&
\totaliseBwdF{\vec{\pi}}(\kappa)
&=&
(\kappa',\alpha)
\\
% true
\totaliseBwdF{\pattTrue \concat \vec{\pi}}(\elimBool{\kappa_1}{\annot{\exNil}{\alpha}})
&=&
(\elimBoolTrue{\kappa_1'}, \alpha \join \beta)
&
\totaliseBwdF{\vec{\pi}}(\kappa_1)
&=&
(\kappa_1',\beta)
\\
% false
\totaliseBwdF{\pattFalse \concat \vec{\pi}}(\elimBool{\annot{\exNil}{\alpha}}{\kappa_2})
&=&
(\elimBoolFalse{\kappa_2'}, \alpha \join \beta)
&
\totaliseBwdF{\vec{\pi}}(\kappa_2)
&=&
(\kappa_2',\beta)
\end{array}$ \\
\vspace{5mm}

\flushleft \shadebox{$\totalisebwd{\kappa}{\vec{\pi}}{\kappa'}{\alpha}$}
\begin{smathpar}
\inferrule*[
   lab={\ruleName{$\totalisebwdarrow$-prod}}
]
{
   \sigma \eq \elimProd{\sigma'}
   \\
   \totalisebwd{\sigma'}{p \concat p' \concat \vec{\pi}}{\tau}{\beta}
}
{
   \totalisebwd{\sigma}{\pattPair{p}{p'} \concat \vec{\pi}}{\elimProd{\tau}}{\beta}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totalisebwdarrow$-nil}}
]
{
   \sigma \eq \elimList{\kappa}{\elimVar{x}{\elimVar{y}{\annot{\exNil}{\alpha}}}}
   \\
   \totalisebwd{\kappa}{\vec{\pi}}{\kappa'}{\beta}
}
{
   \totalisebwd{\sigma}
               {\pattNil \concat \vec{\pi}}
               {\elimNil{\kappa'}}
               {\alpha \join \beta}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totalisebwdarrow$-cons}}
]
{
   \sigma \eq \elimList{\annot{\exNil}{\alpha}}{\sigma'}
   \\
   \totalisebwd{\sigma'}{p \concat p' \concat \vec{\pi}}{\tau}{\beta}
}
{
   \totalisebwd{\sigma}
               {(\pattCons{p}{p'}) \concat \vec{\pi}}
               {\elimCons{\tau}}
               {\alpha \join \beta}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totalisebwdarrow$-non-empty-list}}
]
{
   \sigma \eq \elimList{\annot{\exNil}{\alpha}}{\sigma'}
   \\
   \totalisebwd{\sigma'}{p \concat o \concat \vec{\pi}}{\tau}{\beta}
}
{
   \totalisebwd{\sigma}
               {(\pattList{p}{o}) \concat \vec{\pi}}
               {\elimCons{\tau}}
               {\alpha \join \beta}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totalisebwdarrow$-list-rest-end}}
]
{
   \sigma \eq \elimList{\kappa}{\elimVar{x}{\elimVar{y}{\annot{\exNil}{\alpha}}}}
   \\
   \totalisebwd{\kappa}{\vec{\pi}}{\kappa'}{\beta}
}
{
   \totalisebwd{\sigma}
               {\pattListEnd \concat \vec{\pi}}
               {\elimNil{\kappa'}}
               {\alpha \join \beta}
}
%
\and
%
\inferrule*[
   lab={\ruleName{$\totalisebwdarrow$-list-rest-cons}}
]
{
   \sigma \eq \elimList{\annot{\exNil}{\alpha}}{\sigma'}
   \\
   \totalisebwd{\sigma'}{p \concat o \concat \vec{\pi}}{\tau}{\beta}
}
{
   \totalisebwd{\sigma}
               {(\pattListNext{p}{o}) \concat \vec{\pi}}
               {\elimCons{\tau}}
               {\alpha \join \beta}
}
\end{smathpar}
\caption{Totalise --- backward slicing}
\end{figure}
