\begin{figure}[H]
{\small
\begingroup
\renewcommand*{\arraystretch}{1}
\begin{minipage}[t]{0.5\textwidth}
\begin{tabularx}{\textwidth}{rL{2cm}L{3cm}}
&\textbfit{Trace}&
\\
$T, U ::=$
&
$\tyBool$
&
Booleans
\\
&
$\tyInt$
&
integers
\\
&
$\tyRec{\vec{\bind{x}{A}}}$
&
records
\\
&
$\tyList{A}$
&
lists
\\
&
$\tyFun{A}{B}$
&
functions
\\[2mm]
$\Gamma, \Delta ::=$
&
$\seq{\bind{x}{A}}$
&
typing context
\\[2mm]
&\textbfit{Term}&
\\
$e ::=$
&
$\exTrue \mid \exFalse$
&
Boolean
\\
&
$\exInt{n}$
&
integer
\\
&
$\exVar{x}$
&
variable
\\
&
$\exApp{e}{e'}$
&
application
\\
&
$\exNil$
&
nil
\\
&
$\exCons{e}{e'}$
&
cons
\\
&
$\exRec{\vec{\bind{x}{e}}}$
&
record
\\
&
$\exRecProj{e}{x}$
&
record projection
\\
&
$\exLambda{\sigma}$
&
anonymous function
\\
&
$\exLetRecMutual{h}{e}$
&
recursive let
\end{tabularx}
\end{minipage}%
\begin{minipage}[t]{0.5\textwidth}
\begin{tabularx}{\textwidth}{rL{2.5cm}L{2.5cm}}
&\textbfit{Eliminator}&
\\
$\sigma, \tau ::=$
&
$\elimVar{x}{\kappa}$
&
variable
\\
&
$\elimBool{\kappa}{\kappa'}$
&
Boolean
\\
&
$\elimRec{\vec{x}}{\kappa}$
&
record
\\
&
$\elimList{\kappa}{\sigma}$
&
list
\\[2mm]
&\textbfit{Continuation}&
\\
$\kappa ::=$
&
$e$
&
term
\\
&
$\sigma$
&
eliminator
\\[2mm]
&\textbfit{Value}&
\\
$u, v ::=$
&
$\exTrue \mid \exFalse$
&
Boolean
\\
&
$\exInt{n}$
&
integer
\\
&
$\exNil$
&
nil
\\
&
$\exCons{u}{v}$
&
cons
\\
&
$\exRec{\vec{\bind{x}{v}}}$
&
record
\\
&
$\phi$
&
primitive operator
\\
&
$\exClosure{\rho}{h}{\sigma}$
&
closure
\\[2mm]
$\rho ::=$
&
$\seq{\bind{x}{v}}$
&
environment
\\
$h ::=$
&
$\seq{\bind{x}{\sigma}}$
&
recursive functions
%$x, y$
%&
%&
%identifier
%\\
%$i, j$
%&&
%positive integer
%\\[2mm]
\end{tabularx}
\end{minipage}
\endgroup
}

\begin{syntaxfig}
\mbox{Trace}
&
T, U
&
::=
&
\trVar{x}{\rho}
&
\text{variable}
\\
&&&
\trTrue{\rho}
\mid
\trFalse{\rho}
&
\text{Boolean}
\\
&&&
\trInt{n}{\rho}
&
\text{integer}
\\
&&&
\trRec{\vec{\bind{x}{T}}}
&
\text{record}
\\
&&&
\trRecProj{T}{\vec{x}}{x}
&
\text{record projection}
\\
&&&
\trNil{\rho}
&
\text{nil}
\\
&&&
\trCons{T}{U}
&
\text{cons}
\\
&&&
%\trVec{\vec{U}}{x}{T}{j}
%&
%\text{vector of length $j$}
%\\
%&&&
%\trVecLookup{T}{i}{U}{j}
%&
%\text{vector lookup}
%\\
%&&&
%\trVecLen{T}{i}
%&
%\text{vector length}
%\\
%&&&
\trLambda{\sigma}
&
\text{anonymous function}
\\
&&&
\trApp{T}{U}{w}{T'}
&
\text{application}
\\
&&&
\trAppPrim{T}{\phi}{\vec{n}}{U}{\exInt{m}}
&
\text{primitive application}
\\
&&&
\trLetRecMutual{h}{T}
&
\text{recursive let}
\\[2mm]
\mbox{Match}
&
w
&
::=
&
\matchVar{x}
&
\text{variable}
\\
&&&
\matchTrue \mid \matchFalse
&
\text{Boolean}
\\
&&&
\matchRec{\vec{\bind{x}{w}}}
&
\text{record}
\\
&&&
\matchNil
&
\text{nil}
\\
&&&
\matchCons{w}{w'}
&
\text{cons}
\end{syntaxfig}
\caption{Syntax of traces and matches}
\label{fig:core-language:syntax-trace}
\end{figure}
