\begin{figure}[H]
\flushleft
\shadebox{$\evalFwdF{T}: \Below{(\rho,e,\TT) \to \Below{v}}$}
where $T :: \rho, e \eval v$ \\
\small
\vspace{3mm}
$\begin{array}{lllll}
&&&
\textit{where}
\\
\evalFwdF{T}(\rho,\hole,\alpha)
&=&
v
&
\hole \neq e \eq \hole
\text{ and }
\evalFwdF{T}(\rho,e,\alpha) = v
\\
\evalFwdF{\trVar{x}{\Gamma}}(\rho,\exVar{x},\alpha)
&=&
v
&
\envLookup{\rho}{x}{v}
\\
\evalFwdF{\trOp{\primOp}{\Gamma}}(\rho,\exOp{\primOp},\alpha)
&=&
v
&
\envLookup{\rho}{\primOp}{v}
\\
\evalFwdF{\trLambda{\sigma'}}(\rho,\exLambda{\sigma},\alpha)
&=&
\exClosure{\rho}{\seqEmpty}{\sigma}
\\
\evalFwdF{\trInt{n}{\Gamma}}(\rho,\annInt{n}{\alpha},\alpha')
&=&
\annInt{n}{\alpha \meet \alpha'}
\\
\evalFwdF{\trNil{\Gamma}}(\rho,\annNil{\alpha},\alpha')
&=&
\annNil{\alpha \meet \alpha'}
\\
\evalFwdF{\trCons{T}{U}}(\rho,\annCons{e_1}{e_2}{\alpha},\alpha')
&=&
\annCons{v_1}{v_2}{\alpha \meet \alpha'}
&
\begin{array}[t]{lll}
   v_1 &=& \evalFwdF{T}(\rho, e_1, \alpha')
   \\
   v_2 &=& \evalFwdF{U}(\rho, e_2, \alpha')
\end{array}
\\
\evalFwdF{\trVec{U_{i}}{x}{i}{T}{j}}(\rho,\annVec{e_1}{x}{e_2}{\alpha},\alpha')
&=&
\annVecVal{\vec{v}}{\annInt{j}{\beta}}{\alpha \meet \alpha'}
&
\begin{array}[t]{lll}
   \annInt{j}{\beta} &\eq& \evalFwdF{T}(\rho, e_2, \alpha')
   \\
   v_{i} &=& \evalFwdF{U_{i}}(\rho \concat \bind{x}{i_{\beta}}, e_1, \alpha')
   \quad
   (\forall i \numleq j)
\end{array}
\\
\evalFwdF{\trVecLookup{T}{j}{U}{i}}(\rho,\exVecLookup{e_1}{e_2},\alpha)
&=&
v_{i}
&
\annVecVal{\vec{v}}{\annInt{j}{\alpha'}}{\beta} \eq \evalFwdF{T}(\rho, e_1, \alpha)
\\
\evalFwdF{\trVecLen{T}{j}}(\rho,\exVecLen{e'},\alpha)
&=&
\annInt{j}{\alpha'}
&
\annVecVal{\vec{v}}{\annInt{j}{\alpha'}}{\beta} \eq \evalFwdF{T}(\rho, e', \alpha)
\\
\evalFwdF{\trAppPrimNew{T}{\phi}{\vec{n}}{U}{\exInt{m}}}(\rho,\exApp{e_1}{e_2},\alpha)
&=&
\exPrimOp{\phi}{\vec{v} \concat u}
&
\begin{array}[t]{lll}
   \exPrimOp{\phi}{\vec{v}} &\eq& \evalFwdF{T}(\rho, e_1, \alpha)
   \\
   u &=& \evalFwdF{U}(\rho, e_2, \alpha)
\end{array}
\\
\evalFwdF{\trApp{T}{U}{\matchPlug{w}{T'}}}(\rho,\exApp{e_1}{e_2},\alpha)
&=&
\evalFwdF{T'}(\rho_1 \concat \rho_2 \concat \rho_3, e', \beta)
&
\begin{array}[t]{lll}
   \exClosure{\rho_1}{h}{\sigma} &\eq& \evalFwdF{T}(\rho,e_1,\alpha)
   \\
   u &=& \evalFwdF{U}(\rho, e_2, \alpha)
\end{array}
\end{array}$\\
\vspace{3mm}

\flushleft \shadebox{$\evalFwd{\rho}{e}{\alpha}{T}{v}$}
\begin{smathpar}
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-apply-prim-unsat}},
      right={$\arity{\phi} \numgt \length{\vec{n}} + 1$}
   ]
   {
   }
   {
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-apply-prim-sat}},
      right={$\arity{\phi} = \length{\vec{n}} + 1$}
   ]
   {
      e \eq \exApp{e_1}{e_2}
      \\
      \evalFwdEq{\rho}{e_1}{\alpha}{T}{\exPrimOp{\phi}{\vec{v}}}
      \\
      \evalFwd{\rho}{e_2}{\alpha}{U}{u}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trAppPrimNew{T}{\phi}{\vec{n}}{U}{\exInt{m}}}
              {\primFwd{\phi}(\vec{n} \concat m)(\vec{v} \concat u)}
   }
   %
   \and
   %
   \inferrule*[
   ]
   {
      \rho_1, h \closeDefsFwdR \rho_2
      \\
      \evalFwd{\rho}{e_2}{\alpha}{U}{v}
      \\
      \matchFwd{v}{\sigma}{w}{\rho_3}{e'}{\beta}
   }
   {
   }
   %
   \and
   %
   \inferrule*[lab={
      \ruleName{$\evalFwdS$-let-rec}}
   ]
   {
      e \eq \exLetRecMutual{h'}{e'}
      \\
      \rho, h' \closeDefsFwdR \rho_1
      \\
      \evalFwd{\rho \concat \rho_1}{e'}{\alpha}{T}{v}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trLetRecMutual{h}{T}}{v}
   }
\end{smathpar}
\caption{Evaluation: forward slicing (Boolean and pair cases omitted)}
\end{figure}
