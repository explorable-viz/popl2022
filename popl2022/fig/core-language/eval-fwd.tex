\begin{figure}[H]
\flushleft
\shadebox{$\evalFwdF{T}: \Below{(\rho,e) \to \Below{v}}$}
where $T :: \rho, e \eval v$ \\
\small
\vspace{3mm}
$\begin{array}{lllll}
\end{array}$\\
\vspace{3mm}

\flushleft \shadebox{$\evalFwd{\rho}{e}{\alpha}{T}{v}$}
\begin{smathpar}
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-var}}
   ]
   {
      e \eq \exVar{x}
      \\
      \envLookup{\rho}{x}{v}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trVar{x}{\Gamma}}{v}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-op}}
   ]
   {
      e \eq \exOp{\primOp}
      \\
      \envLookup{\rho}{\primOp}{v}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trOp{\primOp}{\Gamma}}{v}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\evalFwdS$-lambda}}]
   {
      e \eq \exLambda{\sigma}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trLambda{\sigma'}}{\exClosure{\rho}{\seqEmpty}{\sigma}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\evalFwdS$-int}}]
   {
      e \eq \annInt{n}{\alpha}
   }
   {
      \evalFwd{\rho}{e}{\alpha'}{\trInt{n}{\Gamma}}{\annInt{n}{\alpha \meet \alpha'}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\evalFwdS$-nil}}]
   {
      e \eq \annNil{\alpha}
   }
   {
      \evalFwd{\rho}{e}{\alpha'}{\trNil{\Gamma}}{\annNil{\alpha \meet \alpha'}}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-cons}},
   ]
   {
      e \eq \annCons{e_1}{e_2}{\alpha}
      \\
      \evalFwd{\rho}{e_1}{\alpha'}{T}{v_1}
      \\
      \evalFwd{\rho}{e_2}{\alpha'}{U}{v_2}
   }
   {
      \evalFwd{\rho}{e}{\alpha'}{\trCons{T}{U}}{\annCons{v_1}{v_2}{\alpha \meet \alpha'}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\evalFwdS$-vector}}]
   {
      e \eq \annVec{e_1}{x}{e_2}{\alpha}
      \\
      \evalFwdEq{\rho}{e_2}{\alpha'}{T}
                {\annInt{j}{\beta}}
      \\
      \evalFwd{\rho \concat \bind{x}{i_{\beta}}}{e_1}{\alpha'}{U_{i}}{v_{i}}
      \quad
      (\forall i \numleq j)
   }
   {
      \evalFwd{\rho}{e}{\alpha'}{\trVec{U_{i}}{x}{i}{T}{j}}
              {\annVecVal{\vec{v}}{\annInt{j}{\beta}}{\alpha \meet \alpha'}}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-vector-lookup}},
      right={$i \numleq j$}
   ]
   {
      e \eq \exVecLookup{e_1}{e_2}
      \\
      \evalFwdEq{\rho}{e_1}{\alpha}{T}
                {\annVecVal{\vec{v}}{\annInt{j}{\alpha'}}{\beta}}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trVecLookup{T}{j}{U}{i}}{v_{i}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\evalFwdS$-vector-length}}]
   {
      e \eq \exVecLen{e'}
      \\
      \evalFwdEq{\rho}{e'}{\alpha}{T}
                {\annVecVal{\vec{v}}{\annInt{j}{\alpha'}}{\beta}}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trVecLen{T}{j}}
              {\annInt{j}{\alpha'}}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-apply-prim-unsat}},
      right={$\arity{\phi} \numgt \length{\vec{n}} + 1$}
   ]
   {
      e \eq \exApp{e_1}{e_2}
      \\
      \evalFwdEq{\rho}{e_1}{\alpha}{T}{\exPrimOp{\phi}{\vec{v}}}
      \\
      \evalFwd{\rho}{e_2}{\alpha}{U}{u}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trAppPrimNew{T}{\phi}{\vec{n}}{U}{\exInt{m}}}
              {\exPrimOp{\phi}{\vec{v} \concat u}}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-apply-prim-sat}},
      right={$\arity{\phi} = \length{\vec{n}} + 1$}
   ]
   {
      e \eq \exApp{e_1}{e_2}
      \\
      \evalFwdEq{\rho}{e_1}{\alpha}{T}{\exPrimOp{\phi}{\vec{v}}}
      \\
      \evalFwd{\rho}{e_2}{\alpha}{U}{u}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trAppPrimNew{T}{\phi}{\vec{n}}{U}{\exInt{m}}}
              {\primFwd{\phi}(\vec{n} \concat m)(\vec{v} \concat u)}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalFwdS$-apply}}
   ]
   {
      e \eq \exApp{e_1}{e_2}
      \\
      \evalFwdEq{\rho}{e_1}{\alpha}{T}{\exClosure{\rho_1}{h}{\sigma}}
      \\
      \rho_1, h \closeDefsFwdR \rho_2
      \\
      \evalFwd{\rho}{e_2}{\alpha}{U}{v}
      \\
      \matchFwd{v}{\sigma}{w}{\rho_3}{e'}{\beta}
      \\
      \evalFwd{\rho_1 \concat \rho_2 \concat \rho_3}{e'}{\beta}{T'}{v'}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trApp{T}{U}{\matchPlug{w}{T'}}}{v'}
   }
   %
   \and
   %
   \inferrule*[lab={
      \ruleName{$\evalFwdS$-let-rec}}
   ]
   {
      e \eq \exLetRecMutual{h'}{e'}
      \\
      \rho, h' \closeDefsFwdR \rho_1
      \\
      \evalFwd{\rho \concat \rho_1}{e'}{\alpha}{T}{v}
   }
   {
      \evalFwd{\rho}{e}{\alpha}{\trLetRecMutual{h}{T}}{v}
   }
\end{smathpar}
\caption{Evaluation: forward slicing (Boolean and pair cases omitted)}
\end{figure}
