\begin{figure}[H]
\small
$\begin{array}{lllll}
&&&
\textit{where}
\\
\evalBwdF{\trVar{x}{\Gamma}}(v)
&=&
(\rho,\exVar{x},\FF)
&
\envLookupBwd{\rho}{\Gamma}{\bind{x}{v}}
\\
\evalBwdF{\trOp{\primOp}{\Gamma}}(v)
&=&
(\rho,\exOp{\primOp},\FF)
&
\envLookupBwd{\rho}{\Gamma}{\bind{\primOp}{v}}
\\
\evalBwdF{\trLambda{\sigma'}}(\exClosure{\rho}{\seqEmpty}{\sigma})
&=&
(\rho,\exLambda{\sigma},\FF)
&
\envLookupBwd{\rho}{\Gamma}{\bind{\primOp}{v}}
\end{array}$

\flushleft \shadebox{$\evalBwd{v}{T}{\rho}{e}{\alpha}$}
\begin{smathpar}
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-int}}
   ]
   {
      v \eq \annInt{n}{\alpha}
   }
   {
      \evalBwd{v}{\trInt{n}{\Gamma}}{\hole_{\Gamma}}{\annInt{n}{\alpha}}{\alpha}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-nil}}
   ]
   {
      v \eq \annNil{\alpha}
   }
   {
      \evalBwd{v}{\trNil{\Gamma}}{\hole_{\Gamma}}{\annNil{\alpha}}{\alpha}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-cons}}
   ]
   {
      v \eq \annCons{v_1}{v_2}{\beta}
      \\
      \evalBwd{v_1}{T}{\rho}{e_1}{\alpha}
      \\
      \evalBwd{v_2}{U}{\rho'}{e_2}{\alpha'}
   }
   {
      \evalBwd{v}
              {\trCons{T}{U}}
              {\rho \join \rho'}
              {\annCons{e_1}{e_2}{\beta}}
              {\beta \join \alpha \join \alpha'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-vector}}
   ]
   {
      v \eq \annVecVal{\vec{u}}{\annInt{j}{\beta}}{\alpha}
      \\
      \evalBwd{u_{i}}
              {U_{i}}
              {\rho_{i} \concat \bind{x}{i_{\beta'_{i}}}}
              {e_{i}}
              {\alpha'_{i}}
      \quad
      (\forall i \numleq j)
      \\
      \evalBwd{\annInt{j}{\beta \join {\hspace{0.1em}{\oldbigjoin}\hspace{-0.15em}{\vec{\beta}'}}}}
              {T}
              {\rho'}
              {e'}
              {\alpha^\twoPrime}
   }
   {
      \evalBwd{v}
              {\trVec{\vec{U}}{x}{T}{j}}
              {\bigjoin\vec{\rho} \join \rho'}
              {\annVec{\bigjoin\vec{e}}{x}{e'}{\alpha}}
              {\alpha \join {\bigjoin{\vec{\alpha}'}} \join \alpha^\twoPrime}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-vector-lookup}}
   ]
   {
      \evalBwd{\mapUpdate{\annVecVal{\vec{\hole}}{\annInt{j}{\FF}}{\FF}}{i}{v}}
              {T}{\rho}{e_1}{\alpha}
      \\
      \evalBwd{\annInt{i}{\FF}}{U}{\rho'}{e_2}{\alpha'}
   }
   {
      \evalBwd{v}{\trVecLookup{T}{j}{U}{i}}{\rho \join \rho'}{\exVecLookup{e_1}{e_2}}{\alpha \join \alpha'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-vector-length}}
   ]
   {
      v \eq \annInt{j}{\beta}
      \\
      \evalBwd{\annVecVal{\vec{\hole}}{\annInt{j}{\beta}}{\FF}}{T}{\rho}{e}{\alpha}
   }
   {
      \evalBwd{v}{\trVecLen{T}{j}}{\rho}{\exVecLen{e}}{\alpha}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-apply-prim-unsat}}
   ]
   {
      v \eq \exPrimOp{\phi}{\vec{u} \concat u'}
      \\
      \evalBwd{\exPrimOp{\phi}{\vec{u}}}{T}{\rho}{e_1}{\alpha}
      \\
      \evalBwd{u'}{U}{\rho'}{e_2}{\alpha'}
   }
   {
      \evalBwd{v}
              {\trAppPrim{T}{\phi}{\vec{n}}{U}{\exInt{m}}}
              {\rho \join \rho'}
              {\exApp{e_1}{e_2}}
              {\alpha \join \alpha'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-apply-prim-sat}}
   ]
   {
      v \eq \annInt{n'}{\beta}
      \\
      \primBwd{\phi}(\vec{n} \concat m)(\annInt{n'}{\beta}) = \vec{u} \concat u'
      \\
      \evalBwd{\exPrimOp{\phi}{\vec{u}}}{T}{\rho}{e_1}{\alpha}
      \\
      \evalBwd{u'}{U}{\rho'}{e_2}{\alpha'}
   }
   {
      \evalBwd{v}
              {\trAppPrim{T}{\phi}{\vec{n}}{U}{\exInt{m}}}
              {\rho \join \rho'}
              {\exApp{e_1}{e_2}}
              {\alpha \join \alpha'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-apply}}
   ]
   {
      \evalBwd{v}{T'}{\rho_1 \concat \rho_2 \concat \rho_3}{e}{\beta}
      \\
      \matchBwd{\rho_3}{e}{\beta}{w}{v'}{\sigma}
      \\
      \evalBwd{v'}{U}{\rho}{e_2}{\alpha}
      \\
      \rho_2 \closeDefsBwdR \rho_1', h
      \\
      \evalBwd{\exClosure{\rho_1 \join \rho_1'}{h}{\sigma}}{T}{\rho'}{e_1}{\alpha'}
   }
   {
      \evalBwd{v}{\trApp{T}{U}{\matchPlug{w}{T'}}}{\rho \join \rho'}{\exApp{e_1}{e_2}}{\alpha \join \alpha'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\evalBwdS$-let-rec}}
   ]
   {
      \evalBwd{v}{T}{\rho \concat \rho_1}{e}{\alpha}
      \\
      \rho_1 \closeDefsBwdR \rho', h'
   }
   {
      \evalBwd{v}{\trLetRecMutual{h}{T}}{\rho \join \rho'}{\exLetRecMutual{h'}{e}}{\alpha}
   }
\end{smathpar}

\vspace{5pt}
\flushleft\shadebox{$\rho \closeDefsBwdR \rho', h$}
\begin{salign}
   \seqRange{x_1: \exClosure{\rho_1}{h_1}{\sigma_1}}{x_i: \exClosure{\rho_i}{h_i}{\sigma_i}}
   &\closeDefsBwdR
   \bigjoin\vec{\rho},
   (\seqRange{x_1: \sigma_1}{x_i: \sigma_i}) \join {\bigjoin\vec{h}}
\end{salign}
\caption{Evaluation: backward slicing (Boolean and pair cases omitted)}
\end{figure}
