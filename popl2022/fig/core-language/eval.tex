\begin{figure}[H]
\flushleft \shadebox{$\explVal{T}{\rho, e \eval v}$}
\begin{smathpar}
   \inferrule*[
      lab={\ruleName{$\eval$-var}}
   ]
   {
      \envLookup{\rho}{x}{v}
   }
   {
      \explVal{\trVar{x}{\rho}}{\rho, x \eval v}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-lambda}}]
   {
      \strut
   }
   {
      \explVal
         {\trLambda{\sigma}}
         {\rho, \exLambda{\sigma} \eval \exClosure{\rho}{\seqEmpty}{\sigma}}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-true}}
   ]
   {
      \strut
   }
   {
      \explVal{\trTrue{\rho}}{\rho, \exTrue \eval \exTrue}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-false}}
   ]
   {
      \strut
   }
   {
      \explVal{\trFalse{\rho}}{\rho, \exFalse \eval \exFalse}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-int}}
   ]
   {
      \strut
   }
   {
      \explVal{\trInt{n}{\rho}}{\rho, \exInt{n} \eval \exInt{n}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-pair}}]
   {
      \explVal{T}{\rho, e \eval v}
      \\
      \explVal{U}{\rho, e' \eval v'}
   }
   {
      \explVal{\trPair{T}{U}}{\rho, \exPair{e}{e'} \eval \exPair{v}{v'}}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-nil}}
   ]
   {
      \strut
   }
   {
      \explVal{\trNil{\rho}}{\rho, \exNil \eval \exNil}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-cons}}]
   {
      \explVal{T}{\rho, e \eval v}
      \\
      \explVal{U}{\rho, e' \eval v'}
   }
   {
      \explVal{\trCons{T}{U}}{\rho, \exCons{e}{e'} \eval \exCons{v}{v'}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-vector}}]
   {
      \explVal{T}{\rho, e' \eval j}
      \\
      \explVal{U_{i}}{\rho \concat \bind{x}{i}, e \eval v_{i}}
      \quad
      (\forall i \numleq j)
   }
   {
      \explVal{\trVec{\vec{U}}{x}{T}{j}}
              {\rho, \exVec{e}{x}{e'} \eval \exVec{v_{i}}{i}{j}}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-vector-lookup}},
      right={$i \numleq j$}
   ]
   {
      \explVal{T}{\rho, e \eval \exVec{v_{i}}{i}{j}}
      \\
      \explVal{U}{\rho, e' \eval i}
   }
   {
      \explVal{\trVecLookup{T}{j}{U}{i}}{\rho, \exVecLookup{e}{e'} \eval v_{i}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-vector-length}}]
   {
      \explVal{T}{\rho, e \eval \exVec{v_{i}}{i}{j}}
   }
   {
      \explVal{\trVecLen{T}{j}}{\rho, \exVecLen{e} \eval j}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-apply-prim}},
      right={$\arity{\phi} \numgeq \length{\vec{n}} + 1$}
   ]
   {
      \explVal{T}{\rho, e \eval \exPrimOp{\phi}{\vec{n}}}
      \\
      \explVal{U}{\rho, e' \eval \exInt{m}}
   }
   {
      \explVal{\trAppPrim{T}{\phi}{\vec{n}}{U}{m}}
              {\rho, \exApp{e}{e'} \eval \exPrimOp{\phi}{\vec{n} \concat m}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-apply}}]
   {
      \explVal{T}{\rho, e \eval \exClosure{\rho_1}{h}{\sigma'}}
      \\
      \rho_1, h \closeDefsR \rho_2
      \\
      \explVal{U}{\rho, e' \eval v}
      \\
      \explVal{w}{v, \sigma' \match \rho_3, e_1}
      \\
      \explVal{T'}{\rho_1 \concat \rho_2 \concat \rho_3, e_1 \eval v'}
   }
   {
      \explVal{\trAppNew{T}{\rho_1}{h}{U}{w}{T'}}{\rho, \exApp{e}{e'} \eval v'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-let-rec}}
   ]
   {
      \rho, h \closeDefsR \rho'
      \\
      \explVal{T}{\rho \concat \rho', e \eval v}
   }
   {
      \explVal{\trLetRecMutualNew{\rho}{h}{T}}{\rho, \exLetRecMutual{h}{e} \eval v}
   }
\end{smathpar}
\caption{Term $e$ evaluates in environment $\rho$ to value $v$ (witnessed by $T$)}
\label{fig:eval}
\end{figure}
