\begin{figure}[H]

\vspace{5pt}
\flushleft\shadebox{$\rho \closeDefsBwdR \rho', h$}
\begin{salign}
   \vec{\bind{x}{v}}
   &\closeDefsBwdR
   (\bigjoin\vec{\rho}, \vec{\bind{x}{\sigma}} \join {\bigjoin\vec{h}})
   &
   \text{ where }
   v_i = \exClosure{\rho_i}{h_i}{\sigma_i}
\end{salign}

\small
$\begin{array}{lll|llll}
\arrayrulecolor{lightgray}
&&&\textit{where}
\\
\rowcolor{verylightgray}
\envLookupGC{\rho,z} &::& \Below{\rho} \to \Below{v}
&\envLookup{\rho}{z}{v}
&&
\\
\envLookupFwdF{\rho \concat \bind{x}{v},x}(\rho' \concat \bind{x}{u},x) &=& u
\\
\envLookupFwdF{\rho \concat \bind{y}{v},x}(\rho' \concat \bind{y}{u},x)
&=&
\envLookupFwdF{\rho,x}(\rho',x)
&
x \neq y
\\[3mm]
\envLookupBwdF{\rho \concat \bind{x}{v},x}(u)
&=&
\sub{\hole}{\rho} \concat \bind{x}{u}
\\
\envLookupBwdF{\rho \concat \bind{y}{v},x}(u)
&=&
\envLookupBwdF{\rho}(u) \concat \bind{y}{\hole}
&
x \neq y
\\[3mm]
%
%
%
\rowcolor{verylightgray}
\closeDefsGC{\rho,h} &::& \Below{(\rho, h)} \to \Below{\rho'}
&\rho, h \closeDefsR \rho'
&&
\\
\closeDefsFwdF{\rho,h}(\rho',h')
&=&
\vec{\bind{x}{v}}
&
h' &=& \vec{\bind{x}{\sigma}}
\\
&&&
v_i &=& \exClosure{\rho'}{h'}{\sigma_i}
\\[3mm]
\closeDefsBwdF{\rho,h}(\vec{\bind{x}{v}})
&=&
(\bigjoin\vec{\rho}', \vec{\bind{x}{\sigma}} \join {\bigjoin\vec{h}'})
&
v_i &=& \exClosure{\rho'_i}{h'_i}{\sigma_i}
\end{array}$
\caption{Auxiliary functions: forward and backward slicing}
\label{fig:slicing:eval-aux}
\end{figure}
