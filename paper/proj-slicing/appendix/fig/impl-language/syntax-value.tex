\begin{figure}
\begin{syntaxfig}
\mbox{Match}
&
\xi
&
::=
&
\matchVar{x}{\matchHole{}}
&
\text{variable}
\\
&&&
\Xi
&
\text{constructor}
\\[2mm]
\mbox{Constructor match}
&
\Xi
&
::=
&
\family{\Psi_c \mid \kappa_c}{c}{\tilde{c}}
&
\\[2mm]
\mbox{Arguments match}
&
\Psi
&
::=
&
\matchHole{}
&
\text{empty}
\\
&&&
\matchProd{\xi}{\Psi}
&
\text{non-empty}
\\[2mm]
\mbox{Value}
&
v
&
::=
&
\exConst{k}
&
\text{constant}
\\
&&&
\phi
&
\text{first-class primitive}
\\
&&&
\exClosureNew{\rho}{\delta}{\exFun{\sigma}}
&
\text{closure}
\\
&&&
\exConstr{c}{\vec{u}}
&
\text{constructor}
\\[2mm]
\mbox{Environment}
&
\rho
&
::=
&
\envEmpty
&
\text{empty}
\\
&&&
\envExtend{\rho}{x}{u}
&
\text{extend}
\\[2mm]
\mbox{Trace}
&
\expl{T}
&
::=
&
\sub{\trEmpty}{\rho}
&
\text{constant}
\\
&&&
\trVarTwo{x}{\rho}
&
\text{variable}
\\
&&&
\trConstr{c}{\vec{T}}
&
\text{constructor}
\\
&&&
\trApp{T}{T'}{\matchPlug{\xi}{U}}
&
\text{function application}
\\
&&&
\trUnaryApp{(\explVal{T}{\phi})}{(\explVal{T'}{\exConst{k}})}
&
\text{unary application}
\\
&&&
\trPrimApp
   {(\explVal{T}{u})}
   {\exPrimOp}
   {(\explVal{T'}{u'})}
&
\text{binary infix application}
\\
&&&
\trMatch{T}{\matchPlug{\xi}{T'}}
&
\text{pattern-match}
\\
&&&
\trDefs{\vec{z}}{T}
&
\text{definitions}
\\[2mm]
\mbox{Definition}
&
z
&
::=
&
\trLetDef{x}{T}
&
\text{let}
\\
&&&
\trLetrecDef{\delta}
&
\text{mutual recursion}
\\
&&&
\trPrimDef{\sub{x}{\rho}}
&
\text{primitive}
\end{syntaxfig}
\caption{Runtime syntax}
\end{figure}
