\begin{figure}
\flushleft \shadebox{$\envLookup{\rho}{x}{v}$}
\begin{smathpar}
   \inferrule*
   {
      \strut
   }
   {
      \envLookup{\envExtend{\rho}{x}{v}}{x}{v}
   }
   %
   \and
   %
   \inferrule*[right={$x \neq y$}]
   {
      \envLookup{\rho}{x}{v}
   }
   {
      \envLookup{\envExtend{\rho}{y}{u}}{x}{v}
   }
   %
   \and
   %
   \inferrule*
   {
      \envLookup{\rho}{x}{v}
   }
   {
      \envLookup{\envExtendProj{\rho}{y}{u}}{x}{v}
   }
\end{smathpar}
\\[2mm]
\flushleft \shadebox{$\envUpdate{\rho}{x}{v}$}
\begin{salign}
   \envUpdate{\envEmpty}{x}{v} &= \envEmpty
   \\
   \envUpdate{(\envExtend{\rho}{x}{u})}{x}{v} &= \envExtend{\rho}{x}{v}
   \\
   \envUpdate{(\envExtend{\rho}{y}{u})}{x}{v} &= \envExtend{(\envUpdate{\rho}{x}{v})}{y}{u}
   \quad (x \neq y)
\end{salign}
\caption{Environment lookup and environment update}
\end{figure}
