\begin{figure}
\flushleft \shadebox{$\Gamma : \Cxt$}
\begin{smathpar}
   \inferrule*
   {
      \strut
   }
   {
      \cxtEmpty : \Cxt
   }
   %
   \and
   %
   \inferrule*
   {
      \Gamma : \Cxt
   }
   {
      (\cxtExtend{\Gamma}{x}{A}) : \Cxt
   }
   %
   \and
   %
   \inferrule*[right={$\nexists B.x : B \in \Gamma$}]
   {
      \Gamma : \Cxt
   }
   {
      (\cxtExtendProj{\Gamma}{x}{A}) : \Cxt
   }
\end{smathpar}
\flushleft \shadebox{$x : A \in \Gamma$}
\begin{smathpar}
   \inferrule*
   {
      \strut
   }
   {
      x : A \in (\cxtExtend{\Gamma}{x}{A})
   }
   %
   \and
   %
   \inferrule*[right={$x \neq y$}]
   {
      x : A \in \Gamma
   }
   {
      x : A \in (\cxtExtend{\Gamma}{y}{B})
   }
   %
   \and
   %
   \inferrule*
   {
      x : A \in \Gamma
   }
   {
      x : A \in (\cxtExtendProj{\Gamma}{y}{B})
   }
\end{smathpar}
\\[2mm]
\flushleft \shadebox{$\envLookup{\rho}{x}{v}$}
\begin{smathpar}
   \inferrule*
   {
      \strut
   }
   {
      \envLookup{\envExtend{\rho}{x}{v}}{x}{v}
   }
   %
   \and
   %
   \inferrule*[right={$x \neq y$}]
   {
      \envLookup{\rho}{x}{v}
   }
   {
      \envLookup{\envExtend{\rho}{y}{u}}{x}{v}
   }
   %
   \and
   %
   \inferrule*
   {
      \envLookup{\rho}{x}{v}
   }
   {
      \envLookup{\envExtendProj{\rho}{y}{u}}{x}{v}
   }
\end{smathpar}
\noindent \shadebox{$\envType{\Gamma}{\rho}$}
\begin{smathpar}
\inferrule*
{
   \strut
}
{
   \envType{\cxtEmpty}{\envEmpty}
}
%
\and
%
\inferrule*
{
   \envType{\Gamma}{\rho}
   \\
   \valType{v}{A}
}
{
   \envType{\cxtExtend{\Gamma}{x}{A}}{\envExtend{\rho}{x}{v}}
}
%
\and
%
\inferrule*
{
   \envType{\Gamma}{\rho}
   \\
   \valType{v}{A}
}
{
   \envType{\cxtExtendProj{\Gamma}{x}{A}}{\envExtendProj{\rho}{x}{v}}
}
\end{smathpar}
\caption{Well-formed contexts and environments; context and environment lookup}
\end{figure}
