\begin{figure}
\flushleft \shadebox{$\valType{v}{A}$}
\begin{smathpar}
\inferrule*
{
   \strut
}
{
   \valType{\exUnit}{\tyUnit}
}
%
\and
%
\inferrule*
{
   \valType{v}{A}
}
{
   \valType{\exInl{v}}{\tySum{A}{B}}
}
%
\and
%
\inferrule*
{
   \valType{v}{A}
}
{
   \valType{\exInlProj{v}}{\tySumProjL{A}{B}}
}
%
\and
%
\inferrule*
{
   \valType{v}{B}
}
{
   \valType{\exInr{v}}{\tySum{A}{B}}
}
%
\and
%
\inferrule*
{
   \valType{v}{B}
}
{
   \valType{\exInrProj{v}}{\tySumProjR{A}{B}}
}
%
\and
%
\inferrule*
{
   \valType{v_1}{A}
   \\
   \valType{v_2}{B}
}
{
   \valType{\exPair{v_1}{v_2}}{\tyProd{A}{B}}
}
%
\and
%
\inferrule*
{
   \valType{v_1}{A}
   \\
   \valType{v_2}{B}
}
{
   \valType{\exPairProjL{v_1}{v_2}}{\tyProdProjL{A}{B}}
}
%
\and
%
\inferrule*
{
   \valType{v_1}{A}
   \\
   \valType{v_2}{B}
}
{
   \valType{\exPairProjR{v_1}{v_2}}{\tyProdProjR{A}{B}}
}
%
\and
%
\inferrule*
{
   \envType{\Gamma}{\rho}
   \\
   \elimType{\sigma}{B}{A}{\Gamma}
}
{
   \valType{\exClosure{\rho}{\exFun{\sigma}}}{\tyFun{A}{B}}
}
%
\and
%
\inferrule*
{
   \valType{v}{\subst{A}{\tyRec{\tyVar{X}}{A}}{X}}
}
{
   \valType{\exRoll{v}}{\tyRec{\tyVar{X}}{A}}
}
%
\and
%
\inferrule*[right={\textnormal{$A$ closed}}]
{
   \valType{v}{\subst{A}{\tyRec{\tyVar{X}}{A}}{X}}
}
{
   \valType{\exRollProj{v}}{\tyRecProj{\tyVar{X}}{A}}
}
\end{smathpar}
\vspace{5pt}

\noindent \shadebox{$\envType{\Gamma}{\rho}$}
\begin{smathpar}
\inferrule*
{
   \strut
}
{
   \envType{\cxtEmpty}{\envEmpty}
}
%
\and
%
\inferrule*
{
   \envType{\Gamma}{\rho}
   \\
   \valType{v}{A}
}
{
   \envType{\cxtExtend{\Gamma}{x}{A}}{\envExtend{\rho}{x}{v}}
}
%
\and
%
\inferrule*
{
   \envType{\Gamma}{\rho}
   \\
   \valType{v}{A}
}
{
   \envType{\cxtExtendProj{\Gamma}{x}{A}}{\envExtendProj{\rho}{x}{v}}
}
\end{smathpar}
\caption{Typing rules for values and environments}
\label{fig:demand-indexed:typing-value}
\end{figure}
