\begin{frame}
\frametitle{Demand-indexed evaluation}
Typing rule for a demand of type $\ttt{list}_A$:
\begin{mathpar}
\inferrule*
{
  a \in X + 1
  \\
  \Trie{\tau}{\TrieTypePartial{X}{\ttt{list}_A}}{A}{C}
}
{
  \Trie{\{[] \mapsto a, \Cons \mapsto \tau\}}{X}{\ttt{list}_A}{C}
}
\end{mathpar}
Corresponding evaluation rules:
\begin{mathpar}
\inferrule*
{
}
{
  \Eeval{[]}{\{[] \mapsto a, \Cons \mapsto \tau\}}{[]}{\epsilon}
}
%
\and
%
\inferrule*
{
  \Eeval{e}{\sigma}{v}{\theta}
  \\
  \Eeval{es}{\sigma(v)}{vs}{\theta'}
}
{
  \Eeval{e\;{\Cons}\;es}{\{[] \mapsto a, \Cons \mapsto \sigma\}}{v\;{\Cons}\;vs}{\theta \concat \theta'}
}
\end{mathpar}
\end{frame}
