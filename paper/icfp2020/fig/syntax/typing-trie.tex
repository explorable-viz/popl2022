\begin{figure}
\flushleft \shadebox{$\trieType{\sigma}{K}{A}{\Gamma}$}
\begin{smathpar}
\inferrule*[right={$\kappa \in K_{\cxtExtend{\Gamma}{x}{A}}$}]
{
   \strut
}
{
   \trieType{\trieVar{x}{\kappa}}{K}{A}{\Gamma}
}
%
\and
%
\inferrule*[right={$\kappa \in K_{\Gamma}$}]
{
   \strut
}
{
   \trieType{\trieUnit{\kappa}}{K}{\tyUnit}{\Gamma}
}
%
\and
%
\inferrule*
{
   \trieType{\sigma_1}{K}{A}{\Gamma}
   \\
   \trieType{\sigma_2}{K}{B}{\Gamma}
}
{
   \trieType{\trieSum{\sigma_1}{\sigma_2}}{K}{(\tySum{A}{B})}{\Gamma}
}
%
\and
%
\inferrule*
{
   \trieType{\sigma}{\trieTypePartial{K}{B}}{A}{\Gamma}
}
{
   \trieType{\trieProd{\sigma}}{K}{(\tyProd{A}{B})}{\Gamma}
}
%
\and
%
\inferrule*
{
   \trieType{\sigma}{K}{\subst{A}{\tyRec{\tyVar{X}}{A}}{\alpha}}{\Gamma}
}
{
   \trieType{\trieRoll{\sigma}}{K}{(\tyRec{\tyVar{X}}{A})}{\Gamma}
}
\end{smathpar}
\caption{Typing rules for tries}
\label{fig:demand-indexed:typing-trie}
\end{figure}
