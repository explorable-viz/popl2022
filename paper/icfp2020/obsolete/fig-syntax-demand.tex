\begin{figure}
\begin{syntaxfig}
\mbox{Type}
&
\tau
&
::=
&
\tyUnit
\mid
\tyPrim
\mid
\tySum{\tau_1}{\tau_2}
\mid
\tyProd{\tau_1}{\tau_2}
\mid
\tyFun{\tau_1}{\tau_2}
\mid
\tyRec{\alpha}{\tau}
\mid
\tyVar{\alpha}
\\[1mm]
\mbox{Typing context}
&
\Gamma
&
::=
&
\cxtEmpty
\mid
\cxtExtend{\Gamma}{x}{\tau}
\\[1mm]
\mbox{Expression}
&
e
&
::=
&
v
\mid
x
\mid
\exUnit
\mid
\exConst
\mid
\exOp{e_1}{e_2}
\mid
\exFun{f}{x}{e}
\mid
\exApp{e_1}{e_2}
\\
&&
\mid
&
\exPair{e_1}{e_2}
\mid
\exFst{e}
\mid
\exSnd{e}
\mid
\exInl{e}
\mid
\exInr{e}
\\
&&
\mid
&
\exCase{e}{x_1}{e_1}{x_2}{e_2}
\\
&&
\mid
&
\exRoll{e}
\mid
\exUnroll{e}
\\[1mm]
\mbox{Value}
&
v
&
::=
&
\exUnit
\mid
\exConst
\mid
\exPair{v_1}{v_2}
\mid
\exInl{v}
\mid
\exInr{v}
\mid
\exRoll{v}
\mid
\exThunk{\rho}{e}
\\[1mm]
\mbox{Nonempty demand}
&
w
&
::=
&
\hnf
\mid
\exPair{u_1}{u_2}
\mid
\exInl{u}
\mid
\exInr{u}
\mid
\exRoll{u}
\\[1mm]
\mbox{Demand pattern}
&
u
&
::=
&
\hole
\mid
w
\\[1mm]
\mbox{Environment}
&
\rho
&
::=
&
\envEmpty
\mid
\envExtend{\rho}{x}{v}
\\[1mm]
\mbox{Value up to $u$}
&
v_u
&
::=
&
e_{\hole}
\mid
\exUnit_{\hnf}
\mid
\exConst_{\hnf}
\mid
\exPair{{v_1}_{u_1}}{{v_2}_{u_2}}_{\exPair{u_1}{u_2}}
\\
&&
\mid
&
(\exInl{v_u})_{\exInl{u}}
\mid
(\exInr{v_u})_{\exInr{u}}
\mid
(\exRoll{v_u})_{\exRoll{u}}
\end{syntaxfig}
\caption{Abstract syntax}
\label{fig:syntax:values}
\end{figure}
