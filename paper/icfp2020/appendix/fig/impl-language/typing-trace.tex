\begin{figure}
\flushleft \shadebox{$\explType{\Gamma}{T}{A}$}
\begin{smathpar}
\inferrule*
{
   \strut
}
{
   \explType{\Gamma}{\trEmpty}{A}
}
%
\and
%
\inferrule*[right={$x : A \in \Gamma$}]
{
   \explType{\Gamma'}{T}{A}
}
{
   \explType{\Gamma}{\trVar{x}{\Gamma'}{T}}{A}
}
%
\and
%
\inferrule*
{
   \explType{\Gamma}{T}{(\tyFun{A}{B})}
   \\
   \explType{\Gamma}{T'}{A}
   \\
   \trieType{\xi}{K}{A}{\Gamma'}
   \\
   \explType{\Gamma'}{U}{B}
}
{
   \explType
      {\Gamma}
      {\trApp{T}{T'}{\matchPlug{\xi}{U}}}
      {B}
}
%
\and
%
\inferrule*[right={\textnormal{$\interpret{\primOp} \in \BinaryOp{C}{C'}{A}$}}]
{
   \explValType{\Gamma}{\explVal{T}{c}}{C}
   \\
   \explValType{\Gamma}{\explVal{T'}{c'}}{C'}
}
{
   \explType
      {\Gamma}
      {\trPrimApp
         {(\explVal{T}{c})}
         {\exPrimOp}
         {(\explVal{T'}{c'})}}
      {A}
}
%
\and
%
\inferrule*
{
   \explType{\Gamma}{T}{A}
   \\
   \trieType{\xi}{\ExprPartial{B}}{A}{\Gamma'}
   \\
   \explType{\Gamma \concat \Gamma'}{T'}{B}
}
{
   \explType
      {\Gamma}
      {\trMatch{T}{\matchPlug{\xi}{T'}}}
      {B}
}
%
\and
%
\inferrule*
{
   \explValType{\Gamma}{\explVal{T}{u}}{A}
   \\
   \explType{\cxtExtend{\Gamma}{x}{A}}{U}{B}
}
{
   \explType
      {\Gamma}
      {\trLet{x}{\explVal{T}{u}}{\indexed{U}}}
      {B}
}
%
\and
%
\inferrule*
{
   \Gamma \vdash \delta: \Delta
   \\
   \explType{\Gamma \concat \Delta}{T}{A}
}
{
   \explType
      {\Gamma}
      {\trLetrec{\delta}{\indexed{T}}}
      {A}
}
\end{smathpar}
\vspace{5pt}

\flushleft \shadebox{$\explValType{\Gamma}{\vec{\explVal{T}{u}}}{\vec{A}}$}
\begin{smathpar}
\inferrule*
{
   \strut
}
{
   \explValType{\Gamma}{\seqEmpty}{\seqEmpty}
}
%
\and
%
\inferrule*
{
   \explValType{\Gamma}{\explVal{T}{u}}{A}
   \\
   \explValType{\Gamma}{\vec{\explVal{T}{u}}}{\vec{A}}
}
{
   \explValType{\Gamma}{(\explVal{T}{u}) \concat (\vec{\explVal{T}{u}})}{(A \concat \vec{A})}
}
\end{smathpar}
\caption{Typing rules for explanations}
\end{figure}
