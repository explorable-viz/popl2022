\subsection{\lemref{gc-closedefs}}
\proofContext{gc-closedefs}
\begin{proof}
\small
\stepcounter{myequation}
\begin{flalign}
\intertext{\textbf{Part (i)}}
&
\indent
\rho, \delta \closeDefs \rho'
\text{ with }
\delta = \set{\annot{(\exFun{\sigma_f})}{\alpha_f}}_{f \in F}
&
\text{suppose ($\rho, \delta, \rho'$)}
\notag
\\
&
\indent
\rho' = \set{
   f \mapsto \annot{\exClosureNew{\rho}{\delta}{\exFun{\sigma_f}}}{\alpha_f}
   \mid
   f \in F
}
&
\text{\defref{closedefs}}
\notag
\\
&
\indent
\rho' \uncloseDefs
\bigvee_{f \in F}\rho,
\set{f \mapsto \annot{(\exFun{\sigma_f})}{\alpha_f} \mid f \in F} \vee \bigvee_{f \in F}\delta
&
\text{\defref{unclosedefs}}
\notag
\\
&
\qedLocal
\rho, \delta
\mathrel{\closeDefs}{\uncloseDefs}
\rho, \delta \vee \delta
=
\rho, \delta
&
\notag
\\
\intertext{\textbf{Part (ii)}}
&
\indent
\rho' \uncloseDefs \rho^\dagger, \delta^\dagger
\text{ with }
\rho' = \set{
   \annot{\exClosureNew{\rho_f}{\delta_f}{\exFun{\sigma_f}}}{\alpha_f}
}_{f \in F}
&
\text{suppose ($\rho', \rho, \delta$)}
\notag
\\
&
\indent
\rho^\dagger, \delta^\dagger =
\bigvee_{f \in F}\rho_f,
\set{f \mapsto \annot{(\exFun{\sigma_f})}{\alpha_f} \mid f \in F} \vee \bigvee_{f \in F}\delta_f
&
\text{\defref{unclosedefs}}
\notag
\\
&
\indent
\rho^\dagger, \delta^\dagger \closeDefs \rho^\twoPrime
&
\text{suppose ($\rho^\twoPrime$)}
\notag
\\
&
\indent
\rho^\twoPrime =
\set{
   f \mapsto \annot{\exClosureNew{\rho^\dagger}{\delta^\dagger}{\delta^\dagger(f)}}{\alpha_f}
   \mid
   f \in F
}
&
\notag
\text{\defref{closedefs}}
\\
&
\indent\indent
\rho^\twoPrime(f') =
\annot
   {\exClosureNew
      {\bigvee_{f \in F}\rho_f}
      {\set{f \mapsto \annot{(\exFun{\sigma_f})}{\alpha_f} \mid f \in F} \vee \bigvee_{f \in F}\delta_f}
      {\exFun{\sigma_{f'}} \vee \bigvee_{f \in F}\delta_{f}(f')}}
   {\alpha_{f'}}
&
\text{suppose ($f' \in F$)}
\notag
\\
&
\indent\indent
\rho^\twoPrime(f') \geq
\annot
   {\exClosureNew{\rho_{f'}}{\delta_{f'}}{\exFun{\sigma_{f'}}}}
   {\alpha_{f'}}
=
\rho'(f')
&
\notag
\\
&
\qedLocal
\rho' \mathrel{\uncloseDefs\closeDefs} \rho^\twoPrime \geq \rho'
&
\text{$\forall$ intro ($f'$)}
\notag
\end{flalign}
\end{proof}
