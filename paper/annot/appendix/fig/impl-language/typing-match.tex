\begin{figure}
\flushleft \shadebox{$\matchType{\Gamma}{\xi}{K}{A}{\Gamma'}$}
\begin{smathpar}
\inferrule*[right={$\kappa \in K_{\cxtExtend{\Gamma'}{x}{A}}$}]
{
   \strut
}
{
   \matchType{\Gamma}{\matchedVar{x}{\kappa}}{K}{A}{\Gamma'}
}
%
\and
%
\inferrule*[right={$\kappa \in K_{\Gamma'} \wedge \interpret{c} \in C$}]
{
   \strut
}
{
   \matchType{\Gamma}{\matchedGround{c}{\kappa}}{K}{C}{\Gamma'}
}
%
\and
%
\inferrule*[right={$\kappa \in K_{\Gamma'}$}]
{
   \valType{\exClosure{\rho}{\exFun{\sigma}}}{\tyFun{A}{B}}
}
{
   \matchType{\Gamma}{\matchedFun{\exClosure{\rho}{\exFun{\sigma}}}{\kappa}}{K}{(\tyFun{A}{B})}{\Gamma'}
}
%
\and
%
\inferrule*[right={\textnormal{$\dom{\interpret{D}} = \dom{\Xi} = \set{d} \cup \tilde{d}$}}]
{
   \matchType{\Gamma}{\Xi(d)}{K}{\interpret{D}(d)}{\Gamma'}
   \\
   \elimType{\Xi(d')}{K}{\interpret{D}(d')}{\Gamma'}
   \\
   (\forall d' \in \tilde{d})
}
{
   \matchType{\Gamma}{\matchedConstr{\Xi}}{K}{\tyData{D}}{\Gamma'}
}
\end{smathpar}
\vspace{5pt}

\flushleft \shadebox{$\explMatchType{\Gamma}{\Psi}{K}{\vec{A}}{\Gamma'}$}
\begin{smathpar}
\inferrule*[right={$\kappa \in K_{\Gamma'}$}]
{
   \strut
}
{
   \explMatchType{\Gamma}{\matchedUnit{\kappa}}{K}{\seqEmpty}{\Gamma'}
}
%
\and
%
\inferrule*
{
   \explMatchType{\Gamma}{\explVal{T}{\xi}}{\matchTypePartial{K}{\vec{A}}}{A}{\Gamma'}
}
{
   \explMatchType{\Gamma}{\matchedProd{\explVal{T}{\xi}}}{K}{A \concat \vec{A}}{\Gamma'}
}
\end{smathpar}
\caption{Typing rules for matches and match products}
\end{figure}
