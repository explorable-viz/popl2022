% Listings.
\definecolor{verylightgray}{gray}{0.9}
\definecolor{lightgray}{gray}{0.5}
\definecolor{mediumgray}{gray}{0.45}
\newlength\lsthorizontalpadding
\setlength\lsthorizontalpadding{3pt}
\newcommand*\lstnumberstyle{\ttfamily\scriptsize\textcolor{lightgray}}
\newlength\lstnumbersep
\setlength\lstnumbersep{10pt}
\newlength\lstnumberwidth
\setlength\lstnumberwidth{\widthof{\lstnumberstyle00}+\lstnumbersep+\lsthorizontalpadding}
\lstset{
    ,basicstyle=\linespread{0.9}\ttfamily%
    ,breaklines=true%
    ,tabsize=4%
    ,showstringspaces=false%
    ,numbers=left%
    ,numbersep=\lstnumbersep%
    ,numberstyle=\lstnumberstyle%
    ,framesep=0pt%
    ,xleftmargin=3pt%\lstnumberwidth%
    ,framexleftmargin=\lsthorizontalpadding%
    ,xrightmargin=\lsthorizontalpadding%
    ,framexrightmargin=\lsthorizontalpadding%
    ,backgroundcolor=\color{verylightgray}%
    ,postbreak=\ding{229}\space%
    ,mathescape=true%
}
\lstdefinelanguage{code}{%
   morekeywords={match,as,fun}%
}
\lstnewenvironment{codecol}[1][]{\lstset{language=code,#1,moredelim=*[is][\textcolor{mediumgray}]{|}{|}}}{}
