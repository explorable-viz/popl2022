\newcommand*{\hole}{\square}
\newcommand\grayuline{\bgroup\markoverwith{\textcolor{gray}{\rule[-0.9ex]{2pt}{0.4pt}}}\ULon}

\renewcommand*{\ldots}{...} % \ldots sucks with acmart
\renewcommand*{\ruleName}[1]{\textcolor{gray}{\textnormal{\textsf{#1}}}}

% Section symbol.
\renewcommand*{\secref}{\Secref}
\renewcommand*{\secrefTwo}{\SecrefTwo}

% Use this in place of \mathsf.
\newcommand*{\mathSf}[1]{\textup{\textsf{#1}}}
\newcommand*{\Set}[1]{\mathSf{#1}}

\newcommand*{\Int}{\mathbb{Z}}
\newcommand*{\Pow}[1]{\MnSymbolpowerset({#1})}
\newcommand*{\id}{\textsf{id}}
\newcommand*{\adjoint}{\dashv}

% Vectors.
\newcommand*{\override}{\reloverrideleft}
\newcommand*{\seqEmpty}{\varepsilon}

\newcommand*{\sym}[1]{\textbf{\kw{#1}}}
\newcommand*{\symCons}{\sym{:}}

% Expressions.
\newcommand*{\exApp}[2]{{#1}\,{#2}}
\newcommand*{\exBinaryApp}[3]{{#1} \mathbin{#2} {#3}}
\newcommand*{\exCons}[2]{{#1}\,\symCons\,{#2}}
\newcommand*{\exClosure}[3]{\kw{cl}({#1},\exLambda{#2}{#3})}
\newcommand*{\exFalse}{\kw{false}}
\newcommand*{\exFun}[2]{#1\,#2}
\newcommand*{\exIfThenElse}[3]{\kw{if}\;{#1}\;\kw{then}\;{#2}\;\kw{else}\;{#3}}
\newcommand*{\exInt}[1]{#1}
\newcommand*{\exList}[2]{\kw{[}\;#1 \ #2}
\newcommand*{\exListComp}[2]{\kw{[}\,{#1}\;\sym{$\vert$}\;{#2}\,\kw{]}}
\newcommand*{\exListEnum}[2]{\kw{[}\,{#1}\;\kw{..}\;{#2}\,\kw{]}}
\newcommand*{\exLambda}[2]{\uplambda{#1}.{#2}}
\newcommand*{\exLet}[3]{\kw{let}\;{#1}\equal{#2}\;\kw{in}\;{#3}}
\newcommand*{\exLetRecEquational}[3]{\kw{let}\;{#1}\;{#2}\;\kw{in}\;{#3}}
\newcommand*{\exLetRec}[3]{\kw{let}\,\exRec{#1}{#2}\;\kw{in}\;{#3}}
\newcommand*{\exLetRecMutual}[2]{\kw{let}\;{#1}\;\kw{in}\;{#2}}
\newcommand*{\exMatch}[2]{\kw{match}~{#1}~\kw{as}\;{#2}}
\newcommand*{\exMatchList}[5]{\kw{case}~{#1}\;\{\exNil \mapsto #2; \exCons{#3}{#4} \mapsto #5\}}
\newcommand*{\exNil}{\kw{[]}}
\newcommand*{\exOp}[1]{(#1)}
\newcommand*{\exPair}[2]{\kw{(}#1,#2\kw{)}}
\newcommand*{\exPrim}[1]{#1}
\newcommand*{\exPrimOp}[2]{\kw{pr}({#1},{#2})} % value form, analogous to closures
\newcommand*{\exRec}[2]{{#1}{#2}}
\newcommand*{\exTrue}{\kw{true}}
\newcommand*{\exVar}[1]{#1}

% Patterns
\newcommand*{\pattVar}[1]{#1}
\newcommand*{\pattTrue}{\exTrue}
\newcommand*{\pattFalse}{\exFalse}
\newcommand*{\pattCons}[2]{\exCons{#1}{#2}}
\newcommand*{\pattNil}{\exNil}
\newcommand*{\pattList}[2]{\exList{#1}{#2}}
\newcommand*{\pattListNext}[2]{\exListNext{#1}{#2}}
\newcommand*{\pattListEnd}{\exListEnd}
\newcommand*{\pattPair}[2]{\exPair{#1}{#2}}

% Eliminators.
\newcommand*{\elimmapsto}{:}
\newcommand*{\branchCons}[1]{(\symCons)\elimmapsto{#1}}
\newcommand*{\branchNil}[1]{\exNil\elimmapsto{#1}}
\newcommand*{\branchTrue}[1]{\exTrue\elimmapsto{#1}}
\newcommand*{\branchFalse}[1]{\exFalse\elimmapsto{#1}}

\newcommand*{\elimNil}[1]{\{\branchNil{#1}\}}
\newcommand*{\elimCons}[1]{\{\branchCons{#1}\}}
\newcommand*{\elimBool}[2]{\{\branchTrue{#1}, \branchFalse{#2}\}}
\newcommand*{\elimBoolTrue}[1]{\{\branchTrue{#1}\}}
\newcommand*{\elimBoolFalse}[1]{\{\branchFalse{#1}\}}
\newcommand*{\elimList}[2]{\{\branchNil{#1},\branchCons{#2}\}}
\newcommand*{\elimProd}[1]{\kw{prod}\;#1}
\newcommand*{\elimVar}[2]{{#1}\elimmapsto{#2}} % no squigglies as not a 'set' of branches..

\newcommand*{\singleton}[2]{#1[#2]}

\renewcommand*{\lowlight}[1]{\textcolor{gray}{#1}}

\newcommand*{\interpret}[1]{\hat{#1}}

% Types.
\newcommand*{\tyBool}[0]{\kw{Bool}}
\newcommand*{\tyFun}[2]{{#1}\rightarrow{#2}}
\newcommand*{\tyInt}[0]{\kw{Int}}
\newcommand*{\tyList}[1]{\kw{List}\;{#1}}
\newcommand*{\tyMatrix}[1]{\kw{Matrix}\;{#1}}
\newcommand*{\tyProd}[2]{{#1}\times{#2}}
\newcommand*{\tyVec}[1]{\kw{Vec}\;{#1}}

% Sets
\newcommand*{\Below}[1]{{\downarrow}{#1}}
\newcommand*{\Bool}{\mathbb{B}}
\newcommand*{\Val}[1]{\Set{Val}({#1})}

% Lattices
\let\oldbigjoin\bigjoin
\let\oldbigmeet\bigmeet
\renewcommand*{\bigjoin}[1]{{\textstyle{\oldbigjoin}}\hspace{-0.1em}#1}
\renewcommand*{\bigmeet}[1]{{\textstyle{\oldbigmeet}}\hspace{-0.1em}#1}
\let\oldleq\leq
\let\oldgeq\geq
\newcommand*{\numleq}{\oldleq}
\newcommand*{\numgeq}{\oldgeq}
\newcommand*{\numgt}{>}
\renewcommand*{\leq}{\sqsubseteq}
\renewcommand*{\geq}{\sqsupseteq}
\newcommand{\eq}{\doteq}

% Environments.
\newcommand*{\envLookup}[3]{{#1}\mathrel{\smalltriangleright}\bind{#2}{#3}}
\newcommand*{\envLookupBwd}[3]{{#1}\mathrel{\sub{\smalltriangleleft}{#2}}{#3}}
\newcommand*{\mapUpdate}[3]{{#1}\mathrel{\smalltriangleleft}\bind{#2}{#3}}

% Evaluation.
\newcommand*{\eval}{\mathrel{\Rightarrow}}
\newcommand*{\bwdF}[1]{\mathsf{bwd\_#1}}

\newcommand*{\bind}[2]{(#1:#2)}
\renewcommand*{\vec}[1]{\vv{#1}}
\newcommand*{\seq}[1]{\vv{#1}}
\newcommand*{\seqRange}[2]{\seqRangeOp{#1}{#2}{\concat}}
\newcommand*{\setRange}[2]{\set{{#1 .. {#2}}}}
\newcommand*{\seqRangeOp}[3]{{#1} #3 .. #3 {#2}}

\newcommand*{\arity}[1]{\mathsf{arity}(#1)}
\newcommand*{\length}[1]{|#1|}
