\begin{figure}[H]
\flushleft \shadebox{$\rho, e \eval v, \phi$}
\begin{smathpar}
   \inferrule*[
      lab={\ruleName{$\eval$-var}},
      right={$\envLookup{\rho}{x}{v}$}
   ]
   {
      \strut
   }
   {
      \rho, x \eval v
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-lambda}}]
   {
      \strut
   }
   {
      \rho, \exLambda{\sigma} \eval \exClosure{\rho}{x}{e}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-int}}
   ]
   {
      \strut
   }
   {
      \rho, \exInt{n} \eval \exInt{n}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-nil}}
   ]
   {
      \strut
   }
   {
      \rho, \exNil \eval \exNil
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-cons}}
   ]
   {
      \rho, e \eval v
      \\
      \rho, e' \eval v'
   }
   {
      \rho, \exCons{e}{e'}
      \eval
      \exCons{v}{v'}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-match-nil}}
   ]
   {
      \rho, e \eval \exNil, \phi
      \\
      \rho, e_1 \eval v, \psi
   }
   {
      \rho, \exMatchList{e}{e_1}{x}{y}{e_2}
      \eval
      v,
      \lambda u.(\rho_1 \join \rho_2, \exMatchList{e'}{e_1'}{x}{y}{\hole})
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-match-cons}}
   ]
   {
      \rho, e \eval \exCons{v_1}{v_2}
      \\
      \rho \concat \bind{x}{v_1} \concat \bind{y}{v_2}, e_2 \eval v
   }
   {
      \rho, \exMatchList{e}{e_1}{x}{y}{e_2}
      \eval
      v
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-apply}}
   ]
   {
      \rho, e \eval \exClosure{\rho_1}{x}{e''}
      \\
      \rho, e' \eval v
      \\
      \rho \concat \bind{x}{v} \eval v'
   }
   {
      \rho, \exApp{e}{e'} \eval v'
   }
\end{smathpar}

\caption{Evaluation}
\end{figure}
