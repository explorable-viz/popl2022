\begin{figure}[H]
\flushleft \shadebox{$\rho, e \eval v$}
\begin{smathpar}
   \inferrule*[
      lab={\ruleName{$\eval$-var}},
      right={$\envLookup{\rho}{x}{v}$}
   ]
   {
      \strut
   }
   {
      \rho, x \eval v
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-lambda}}]
   {
      \strut
   }
   {
      \rho, \exLambda{\sigma} \eval \exClosure{\rho}{x}{e}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-int}}
   ]
   {
      \strut
   }
   {
      \rho, \exInt{n} \eval \exInt{n}
   }
   %
   \and
   %
   \inferrule*[
      lab={\ruleName{$\eval$-nil}},
      right={$\vdash \rho: \Gamma$}
   ]
   {
      \strut
   }
   {
      \explVal{\trNil{\Gamma}}{\rho, \exNil \eval \exNil}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-cons}}]
   {
      \explVal{T}{\rho, e \eval v}
      \\
      \explVal{U}{\rho, e' \eval v'}
   }
   {
      \explVal{\trCons{T}{U}}{\rho, \exCons{e}{e'} \eval \exCons{v}{v'}}
   }
   %
   \and
   %
   \inferrule*[lab={\ruleName{$\eval$-apply}}]
   {
      \explVal{T}{\rho, e \eval \exClosure{\rho_1}{h}{\sigma}}
      \\
      \rho_1, h \closeDefsR \rho_2
      \\
      \explVal{U}{\rho, e' \eval v}
      \\
      \explVal{w}{v, \sigma \match \rho_3, e_1}
      \\
      \explVal{T'}{\rho_1 \concat \rho_2 \concat \rho_3, e_1 \eval v'}
   }
   {
      \explVal{\trApp{T}{U}{\matchPlug{w}{T'}}}{\rho, \exApp{e}{e'} \eval v'}
   }
\end{smathpar}

\caption{Evaluation}
\end{figure}
